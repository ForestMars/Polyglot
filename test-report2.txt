$ vitest "--reporter=verbose" --no-color

 DEV  v4.0.12 /Users/forestmars/sandbox/polyglot

stderr | src/__tests__/components/ConversationSidebar.test.tsx
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stderr | src/__tests__/components/ConversationSidebar.test.tsx
[DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stderr | src/components/__tests__/ConversationSidebar.test.tsx
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stderr | src/components/__tests__/ConversationSidebar.test.tsx
[DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stderr | src/__tests__/components/SettingsPanel.test.tsx
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stderr | src/__tests__/components/SettingsPanel.test.tsx
[DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > renders the sidebar with correct title
[Sidebar] Rendered. Conversations: []
=== DEBUG: Loading conversations with filters ===
Current filters: {
  showArchived: [33mfalse[39m,
  filterProvider: [32m''[39m,
  filterModel: [32m''[39m,
  searchQuery: [32m''[39m
}
[StateManager] Searching conversations with filters: {
  searchQuery: [32m''[39m,
  provider: [32m''[39m,
  model: [32m''[39m,
  showArchived: [33mfalse[39m,
  dateRange: [32m'not set'[39m
}
[StateManager] Loading conversations with showArchived=false
Direct IndexedDB test: [33m0[39m
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m
[StateManager] Found 0 conversations matching filters

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > renders the sidebar with correct title
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > renders the sidebar with correct title
[ConversationSidebar] Loaded 0 conversations (showArchived: false)

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > renders the sidebar with correct title
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > renders the sidebar with correct title
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > renders the sidebar with correct title
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > renders the sidebar with correct title
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > displays list of conversations
[Sidebar] Rendered. Conversations: []
=== DEBUG: Loading conversations with filters ===
Current filters: {
  showArchived: [33mfalse[39m,
  filterProvider: [32m''[39m,
  filterModel: [32m''[39m,
  searchQuery: [32m''[39m
}
[StateManager] Searching conversations with filters: {
  searchQuery: [32m''[39m,
  provider: [32m''[39m,
  model: [32m''[39m,
  showArchived: [33mfalse[39m,
  dateRange: [32m'not set'[39m
}
[StateManager] Loading conversations with showArchived=false
Direct IndexedDB test: [33m0[39m
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m
[StateManager] Found 0 conversations matching filters

stderr | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > displays list of conversations
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stdout | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > displays list of conversations
[ConversationSidebar] Loaded 0 conversations (showArchived: false)

stderr | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > displays list of conversations
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > displays list of conversations
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > displays list of conversations
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > displays list of conversations
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows search input
[Sidebar] Rendered. Conversations: []
=== DEBUG: Loading conversations with filters ===
Current filters: {
  showArchived: [33mfalse[39m,
  filterProvider: [32m''[39m,
  filterModel: [32m''[39m,
  searchQuery: [32m''[39m
}
[StateManager] Searching conversations with filters: {
  searchQuery: [32m''[39m,
  provider: [32m''[39m,
  model: [32m''[39m,
  showArchived: [33mfalse[39m,
  dateRange: [32m'not set'[39m
}
[StateManager] Loading conversations with showArchived=false
Direct IndexedDB test: [33m0[39m
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m
[StateManager] Found 0 conversations matching filters

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows search input
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows search input
[ConversationSidebar] Loaded 0 conversations (showArchived: false)

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows search input
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows search input
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows search input
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows search input
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > calls onConversationSelect when a conversation is clicked
[Sidebar] Rendered. Conversations: []
=== DEBUG: Loading conversations with filters ===
Current filters: {
  showArchived: [33mfalse[39m,
  filterProvider: [32m''[39m,
  filterModel: [32m''[39m,
  searchQuery: [32m''[39m
}
[StateManager] Searching conversations with filters: {
  searchQuery: [32m''[39m,
  provider: [32m''[39m,
  model: [32m''[39m,
  showArchived: [33mfalse[39m,
  dateRange: [32m'not set'[39m
}
[StateManager] Loading conversations with showArchived=false
Direct IndexedDB test: [33m0[39m
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m
[StateManager] Found 0 conversations matching filters

stderr | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > calls onConversationSelect when a conversation is clicked
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stdout | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > calls onConversationSelect when a conversation is clicked
[ConversationSidebar] Loaded 0 conversations (showArchived: false)

stderr | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > calls onConversationSelect when a conversation is clicked
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > calls onConversationSelect when a conversation is clicked
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > calls onConversationSelect when a conversation is clicked
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > calls onConversationSelect when a conversation is clicked
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows archive toggle button
[Sidebar] Rendered. Conversations: []
=== DEBUG: Loading conversations with filters ===
Current filters: {
  showArchived: [33mfalse[39m,
  filterProvider: [32m''[39m,
  filterModel: [32m''[39m,
  searchQuery: [32m''[39m
}
[StateManager] Searching conversations with filters: {
  searchQuery: [32m''[39m,
  provider: [32m''[39m,
  model: [32m''[39m,
  showArchived: [33mfalse[39m,
  dateRange: [32m'not set'[39m
}
[StateManager] Loading conversations with showArchived=false
Direct IndexedDB test: [33m0[39m
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m
[StateManager] Found 0 conversations matching filters

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows archive toggle button
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows archive toggle button
[ConversationSidebar] Loaded 0 conversations (showArchived: false)

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows archive toggle button
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows archive toggle button
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows archive toggle button
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows archive toggle button
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > calls onNewConversation when New Chat button is clicked
[Sidebar] Rendered. Conversations: []
=== DEBUG: Loading conversations with filters ===
Current filters: {
  showArchived: [33mfalse[39m,
  filterProvider: [32m''[39m,
  filterModel: [32m''[39m,
  searchQuery: [32m''[39m
}
[StateManager] Searching conversations with filters: {
  searchQuery: [32m''[39m,
  provider: [32m''[39m,
  model: [32m''[39m,
  showArchived: [33mfalse[39m,
  dateRange: [32m'not set'[39m
}
[StateManager] Loading conversations with showArchived=false
Direct IndexedDB test: [33m0[39m
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m
[StateManager] Found 0 conversations matching filters

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > calls onNewConversation when New Chat button is clicked
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > calls onNewConversation when New Chat button is clicked
[ConversationSidebar] Loaded 0 conversations (showArchived: false)

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > calls onNewConversation when New Chat button is clicked
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > calls onNewConversation when New Chat button is clicked
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > calls onNewConversation when New Chat button is clicked
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > calls onNewConversation when New Chat button is clicked
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > shows new chat button
[Sidebar] Rendered. Conversations: []
=== DEBUG: Loading conversations with filters ===
Current filters: {
  showArchived: [33mfalse[39m,
  filterProvider: [32m''[39m,
  filterModel: [32m''[39m,
  searchQuery: [32m''[39m
}
[StateManager] Searching conversations with filters: {
  searchQuery: [32m''[39m,
  provider: [32m''[39m,
  model: [32m''[39m,
  showArchived: [33mfalse[39m,
  dateRange: [32m'not set'[39m
}
[StateManager] Loading conversations with showArchived=false
Direct IndexedDB test: [33m0[39m
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m
[StateManager] Found 0 conversations matching filters

stderr | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > shows new chat button
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stdout | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > shows new chat button
[ConversationSidebar] Loaded 0 conversations (showArchived: false)

stderr | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > shows new chat button
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > shows new chat button
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > shows new chat button
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > shows new chat button
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows loading state initially
[Sidebar] Rendered. Conversations: []
=== DEBUG: Loading conversations with filters ===
Current filters: {
  showArchived: [33mfalse[39m,
  filterProvider: [32m''[39m,
  filterModel: [32m''[39m,
  searchQuery: [32m''[39m
}
[StateManager] Searching conversations with filters: {
  searchQuery: [32m''[39m,
  provider: [32m''[39m,
  model: [32m''[39m,
  showArchived: [33mfalse[39m,
  dateRange: [32m'not set'[39m
}
[StateManager] Loading conversations with showArchived=false
Direct IndexedDB test: [33m0[39m
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m
[StateManager] Found 0 conversations matching filters

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows loading state initially
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stdout | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > calls onNewConversation when new chat button is clicked
[Sidebar] Rendered. Conversations: []
=== DEBUG: Loading conversations with filters ===
Current filters: {
  showArchived: [33mfalse[39m,
  filterProvider: [32m''[39m,
  filterModel: [32m''[39m,
  searchQuery: [32m''[39m
}
[StateManager] Searching conversations with filters: {
  searchQuery: [32m''[39m,
  provider: [32m''[39m,
  model: [32m''[39m,
  showArchived: [33mfalse[39m,
  dateRange: [32m'not set'[39m
}
[StateManager] Loading conversations with showArchived=false
Direct IndexedDB test: [33m0[39m
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m
[StateManager] Found 0 conversations matching filters

stderr | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > calls onNewConversation when new chat button is clicked
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stdout | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > calls onNewConversation when new chat button is clicked
[ConversationSidebar] Loaded 0 conversations (showArchived: false)

stderr | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > calls onNewConversation when new chat button is clicked
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > calls onNewConversation when new chat button is clicked
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > calls onNewConversation when new chat button is clicked
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > calls onNewConversation when new chat button is clicked
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows loading state initially
[ConversationSidebar] Loaded 0 conversations (showArchived: false)

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows loading state initially
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows loading state initially
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows loading state initially
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows loading state initially
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows empty state when no conversations exist
[Sidebar] Rendered. Conversations: []
=== DEBUG: Loading conversations with filters ===
Current filters: {
  showArchived: [33mfalse[39m,
  filterProvider: [32m''[39m,
  filterModel: [32m''[39m,
  searchQuery: [32m''[39m
}
[StateManager] Searching conversations with filters: {
  searchQuery: [32m''[39m,
  provider: [32m''[39m,
  model: [32m''[39m,
  showArchived: [33mfalse[39m,
  dateRange: [32m'not set'[39m
}
[StateManager] Loading conversations with showArchived=false
Direct IndexedDB test: [33m0[39m
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m
[StateManager] Found 0 conversations matching filters

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows empty state when no conversations exist
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows empty state when no conversations exist
[ConversationSidebar] Loaded 0 conversations (showArchived: false)

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows empty state when no conversations exist
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows empty state when no conversations exist
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows empty state when no conversations exist
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > shows search bar
[Sidebar] Rendered. Conversations: []
=== DEBUG: Loading conversations with filters ===
Current filters: {
  showArchived: [33mfalse[39m,
  filterProvider: [32m''[39m,
  filterModel: [32m''[39m,
  searchQuery: [32m''[39m
}
[StateManager] Searching conversations with filters: {
  searchQuery: [32m''[39m,
  provider: [32m''[39m,
  model: [32m''[39m,
  showArchived: [33mfalse[39m,
  dateRange: [32m'not set'[39m
}
[StateManager] Loading conversations with showArchived=false
Direct IndexedDB test: [33m0[39m
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m
[StateManager] Found 0 conversations matching filters

stderr | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > shows search bar
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stdout | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > shows search bar
[ConversationSidebar] Loaded 0 conversations (showArchived: false)

stderr | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > shows search bar
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > shows search bar
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > shows search bar
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > shows search bar
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

 Ã— src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > displays list of conversations 45ms
   â†’ Unable to find an element with the text: First Chat. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex flex-col h-full bg-background border-r border-border"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4 pb-2 border-b border-border"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between mb-3"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-lg font-semibold mr-4"[39m
          [36m>[39m
            [0mConversations[0m
          [36m</h2>[39m
          [36m<button[39m
            [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-primary text-primary-foreground hover:bg-primary/90 rounded-md h-8 px-3 whitespace-nowrap"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-plus w-4 h-4 mr-1"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"M5 12h14"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M12 5v14"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mNew Chat[0m
          [36m</button>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"relative mb-3"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"m21 21-4.34-4.34"[39m
            [36m/>[39m
            [36m<circle[39m
              [33mcx[39m=[32m"11"[39m
              [33mcy[39m=[32m"11"[39m
              [33mr[39m=[32m"8"[39m
            [36m/>[39m
          [36m</svg>[39m
          [36m<input[39m
            [33mclass[39m=[32m"flex w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm pl-10 pr-4 h-9"[39m
            [33mplaceholder[39m=[32m"Search conversations..."[39m
            [33mvalue[39m=[32m""[39m
          [36m/>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center gap-2 mb-3"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-funnel w-4 h-4 text-muted-foreground"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
            [36m/>[39m
          [36m</svg>[39m
          [36m<span[39m
            [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
          [36m>[39m
            [0mFilters:[0m
          [36m</span>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between"[39m
        [36m>[39m
          [36m<button[39m
            [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground rounded-md h-7 px-2 text-xs"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-archive w-3 h-3 mr-1"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<rect[39m
                [33mheight[39m=[32m"5"[39m
                [33mrx[39m=[32m"1"[39m
                [33mwidth[39m=[32m"20"[39m
                [33mx[39m=[32m"2"[39m
                [33my[39m=[32m"3"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M10 12h4"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mShow[0m
            [0m Archived[0m
          [36m</button>[39m
          [36m<span[39m
            [33mclass[39m=[32m"text-xs text-muted-foreground"[39m
          [36m>[39m
            [0m0[0m
            [0m conversation[0m
            [0ms[0m
          [36m</span>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"relative overflow-hidden flex-1"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mstyle[39m=[32m"position: relative; --radix-scroll-area-corner-width: 0px; --radix-scroll-area-corner-height: 0px;"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-full w-full rounded-[inherit]"[39m
          [33mdata-radix-scroll-area-viewport[39m=[32m""[39m
          [33mstyle[39m=[32m"overflow-x: hidden; overflow-y: scroll;"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"min-width: 100%; display: table;"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"p-4 text-center text-muted-foreground"[39m
            [36m>[39m
              [36m<p>[39m
                [0mNo conversations yet. Start chatting to create one![0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 Ã— src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > calls onConversationSelect when a conversation is clicked 8ms
   â†’ Unable to find an element with the text: Second Chat. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex flex-col h-full bg-background border-r border-border"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4 pb-2 border-b border-border"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between mb-3"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-lg font-semibold mr-4"[39m
          [36m>[39m
            [0mConversations[0m
          [36m</h2>[39m
          [36m<button[39m
            [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-primary text-primary-foreground hover:bg-primary/90 rounded-md h-8 px-3 whitespace-nowrap"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-plus w-4 h-4 mr-1"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"M5 12h14"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M12 5v14"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mNew Chat[0m
          [36m</button>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"relative mb-3"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"m21 21-4.34-4.34"[39m
            [36m/>[39m
            [36m<circle[39m
              [33mcx[39m=[32m"11"[39m
              [33mcy[39m=[32m"11"[39m
              [33mr[39m=[32m"8"[39m
            [36m/>[39m
          [36m</svg>[39m
          [36m<input[39m
            [33mclass[39m=[32m"flex w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm pl-10 pr-4 h-9"[39m
            [33mplaceholder[39m=[32m"Search conversations..."[39m
            [33mvalue[39m=[32m""[39m
          [36m/>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center gap-2 mb-3"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-funnel w-4 h-4 text-muted-foreground"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
            [36m/>[39m
          [36m</svg>[39m
          [36m<span[39m
            [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
          [36m>[39m
            [0mFilters:[0m
          [36m</span>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between"[39m
        [36m>[39m
          [36m<button[39m
            [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground rounded-md h-7 px-2 text-xs"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-archive w-3 h-3 mr-1"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<rect[39m
                [33mheight[39m=[32m"5"[39m
                [33mrx[39m=[32m"1"[39m
                [33mwidth[39m=[32m"20"[39m
                [33mx[39m=[32m"2"[39m
                [33my[39m=[32m"3"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M10 12h4"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mShow[0m
            [0m Archived[0m
          [36m</button>[39m
          [36m<span[39m
            [33mclass[39m=[32m"text-xs text-muted-foreground"[39m
          [36m>[39m
            [0m0[0m
            [0m conversation[0m
            [0ms[0m
          [36m</span>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"relative overflow-hidden flex-1"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mstyle[39m=[32m"position: relative; --radix-scroll-area-corner-width: 0px; --radix-scroll-area-corner-height: 0px;"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-full w-full rounded-[inherit]"[39m
          [33mdata-radix-scroll-area-viewport[39m=[32m""[39m
          [33mstyle[39m=[32m"overflow-x: hidden; overflow-y: scroll;"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"min-width: 100%; display: table;"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"p-4 text-center text-muted-foreground"[39m
            [36m>[39m
              [36m<p>[39m
                [0mNo conversations yet. Start chatting to create one![0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 âœ“ src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > shows new chat button 11ms
 âœ“ src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > calls onNewConversation when new chat button is clicked 7ms
 âœ“ src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > shows search bar 9ms
stdout | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > renders provider selection
[OllamaService] Checking health at: http://localhost:11434/api/tags

stderr | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > renders provider selection
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > renders provider selection
Direct IndexedDB test: [33m0[39m
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > renders provider selection
An update to SettingsPanel inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows empty state when no conversations exist
[Sidebar] Rendered. Conversations: []

stderr | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > renders provider selection
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stderr | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > renders provider selection
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > renders provider selection
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

 âœ“ src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > renders the sidebar with correct title 42ms
 âœ“ src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows search input 7ms
 âœ“ src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows archive toggle button 5ms
 âœ“ src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > calls onNewConversation when New Chat button is clicked 7ms
 Ã— src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows loading state initially 12ms
   â†’ Unable to find an element with the text: Loading conversations.... This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex flex-col h-full bg-background border-r border-border"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4 pb-2 border-b border-border"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between mb-3"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-lg font-semibold mr-4"[39m
          [36m>[39m
            [0mConversations[0m
          [36m</h2>[39m
          [36m<button[39m
            [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-primary text-primary-foreground hover:bg-primary/90 rounded-md h-8 px-3 whitespace-nowrap"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-plus w-4 h-4 mr-1"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"M5 12h14"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M12 5v14"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mNew Chat[0m
          [36m</button>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"relative mb-3"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"m21 21-4.34-4.34"[39m
            [36m/>[39m
            [36m<circle[39m
              [33mcx[39m=[32m"11"[39m
              [33mcy[39m=[32m"11"[39m
              [33mr[39m=[32m"8"[39m
            [36m/>[39m
          [36m</svg>[39m
          [36m<input[39m
            [33mclass[39m=[32m"flex w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm pl-10 pr-4 h-9"[39m
            [33mplaceholder[39m=[32m"Search conversations..."[39m
            [33mvalue[39m=[32m""[39m
          [36m/>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center gap-2 mb-3"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-funnel w-4 h-4 text-muted-foreground"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
            [36m/>[39m
          [36m</svg>[39m
          [36m<span[39m
            [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
          [36m>[39m
            [0mFilters:[0m
          [36m</span>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between"[39m
        [36m>[39m
          [36m<button[39m
            [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground rounded-md h-7 px-2 text-xs"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-archive w-3 h-3 mr-1"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<rect[39m
                [33mheight[39m=[32m"5"[39m
                [33mrx[39m=[32m"1"[39m
                [33mwidth[39m=[32m"20"[39m
                [33mx[39m=[32m"2"[39m
                [33my[39m=[32m"3"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M10 12h4"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mShow[0m
            [0m Archived[0m
          [36m</button>[39m
          [36m<span[39m
            [33mclass[39m=[32m"text-xs text-muted-foreground"[39m
          [36m>[39m
            [0m0[0m
            [0m conversation[0m
            [0ms[0m
          [36m</span>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"relative overflow-hidden flex-1"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mstyle[39m=[32m"position: relative; --radix-scroll-area-corner-width: 0px; --radix-scroll-area-corner-height: 0px;"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-full w-full rounded-[inherit]"[39m
          [33mdata-radix-scroll-area-viewport[39m=[32m""[39m
          [33mstyle[39m=[32m"overflow-x: hidden; overflow-y: scroll;"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"min-width: 100%; display: table;"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"p-4 text-center text-muted-foreground"[39m
            [36m>[39m
              [36m<p>[39m
                [0mNo conversations yet. Start chatting to create one![0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
stdout | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > allows switching providers
[OllamaService] Checking health at: http://localhost:11434/api/tags

stderr | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > allows switching providers
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > allows switching providers
Direct IndexedDB test: [33m0[39m
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > allows switching providers
An update to SettingsPanel inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > allows switching providers
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > allows switching providers
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > allows switching providers
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stderr | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > shows API key management for non-local providers
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > shows API key management for non-local providers
Direct IndexedDB test: [33m0[39m
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > shows API key management for non-local providers
An update to SettingsPanel inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > shows API key management for non-local providers
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > shows API key management for non-local providers
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > shows API key management for non-local providers
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > hides data transfer section by default
[OllamaService] Checking health at: http://localhost:11434/api/tags

stderr | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > hides data transfer section by default
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > hides data transfer section by default
Direct IndexedDB test: [33m0[39m
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > hides data transfer section by default
An update to SettingsPanel inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > hides data transfer section by default
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > hides data transfer section by default
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > hides data transfer section by default
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > shows data transfer section when clicked
[OllamaService] Checking health at: http://localhost:11434/api/tags

stderr | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > shows data transfer section when clicked
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > shows data transfer section when clicked
Direct IndexedDB test: [33m0[39m
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > shows data transfer section when clicked
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > shows data transfer section when clicked
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > shows data transfer section when clicked
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

 Ã— src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > renders provider selection 66ms
   â†’ Found multiple elements with the text: Ollama

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<span[39m
  [33mstyle[39m=[32m"pointer-events: none;"[39m
[36m>[39m
  [0mOllama[0m
[36m</span>[39m

Ignored nodes: comments, script, style
[36m<span>[39m
  [0mOllama[0m
[36m</span>[39m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"w-96 max-h-[80vh] glass-panel rounded-lg shadow-2xl overflow-hidden flex flex-col"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between p-4 border-b"[39m
      [36m>[39m
        [36m<h2[39m
          [33mclass[39m=[32m"text-lg font-semibold"[39m
        [36m>[39m
          [0mSettings[0m
        [36m</h2>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-9 rounded-md px-3"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-x h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M18 6 6 18"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"m6 6 12 12"[39m
            [36m/>[39m
          [36m</svg>[39m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 overflow-y-auto p-4 space-y-6"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border bg-card text-card-foreground shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"12"[39m
                  [33mcy[39m=[32m"12"[39m
                  [33mr[39m=[32m"3"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mGeneral Settings[0m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0 space-y-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
                [33mfor[39m=[32m"showArchived"[39m
              [36m>[39m
                [0mShow Archived Chats[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"rounded border-gray-300"[39m
                [33mid[39m=[32m"showArchived"[39m
                [33mtype[39m=[32m"checkbox"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
                [33mfor[39m=[32m"cacheToggle"[39m
              [36m>[39m
                [0mEnable Conversation Cache[0m
              [36m</label>[39m
              [36m<input[39m
                [33mchecked[39m=[32m""[39m
                [33mclass[39m=[32m"rounded border-gray-300"[39m
                [33mid[39m=[32m"cacheToggle"[39m
                [33mtype[39m=[32m"checkbox"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
                [33mfor[39m=[32m"ollamaUrl"[39m
              [36m>[39m
                [0mOllama Base URL[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm"[39m
                [33mid[39m=[32m"ollamaUrl"[39m
                [33mplaceholder[39m=[32m"http://localhost:11434"[39m
                [33mvalue[39m=[32m"http://localhost:11434"[39m
              [36m/>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-3"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
          [36m>[39m
            [0mProvider[0m
          [36m</label>[39m
          [36m<button[39m
            [33maria-autocomplete[39m=[32m"none"[39m
  ...
stdout | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > displays current model information
[OllamaService] Checking health at: http://localhost:11434/api/tags

stderr | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > displays current model information
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > displays current model information
Direct IndexedDB test: [33m0[39m
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > displays current model information
An update to SettingsPanel inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > displays current model information
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > displays current model information
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > displays current model information
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

 Ã— src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > allows switching providers 35ms
   â†’ Unable to find an accessible element with the role "combobox" and name `/provider/i`

Here are the accessible roles:

  heading:

  Name "Settings":
  [36m<h2[39m
    [33mclass[39m=[32m"text-lg font-semibold"[39m
  [36m/>[39m

  Name "General Settings":
  [36m<h3[39m
    [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
  [36m/>[39m

  Name "Ollama Status":
  [36m<h3[39m
    [33mclass[39m=[32m"font-semibold tracking-tight text-sm flex items-center gap-2"[39m
  [36m/>[39m

  Name "Current Configuration":
  [36m<h3[39m
    [33mclass[39m=[32m"font-semibold tracking-tight text-sm"[39m
  [36m/>[39m

  --------------------------------------------------
  button:

  Name "":
  [36m<button[39m
    [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-9 rounded-md px-3"[39m
  [36m/>[39m

  Name "Checking...":
  [36m<button[39m
    [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 rounded-md px-3 w-full"[39m
    [33mdisabled[39m=[32m""[39m
  [36m/>[39m

  Name "Data Transfer â–¼":
  [36m<button[39m
    [33mclass[39m=[32m"flex items-center gap-2 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors"[39m
  [36m/>[39m

  --------------------------------------------------
  checkbox:

  Name "Show Archived Chats":
  [36m<input[39m
    [33mclass[39m=[32m"rounded border-gray-300"[39m
    [33mid[39m=[32m"showArchived"[39m
    [33mtype[39m=[32m"checkbox"[39m
  [36m/>[39m

  Name "Enable Conversation Cache":
  [36m<input[39m
    [33mchecked[39m=[32m""[39m
    [33mclass[39m=[32m"rounded border-gray-300"[39m
    [33mid[39m=[32m"cacheToggle"[39m
    [33mtype[39m=[32m"checkbox"[39m
  [36m/>[39m

  --------------------------------------------------
  textbox:

  Name "Ollama Base URL":
  [36m<input[39m
    [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm"[39m
    [33mid[39m=[32m"ollamaUrl"[39m
    [33mplaceholder[39m=[32m"http://localhost:11434"[39m
    [33mvalue[39m=[32m"http://localhost:11434"[39m
  [36m/>[39m

  Name "Base URL":
  [36m<input[39m
    [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm glass-panel"[39m
    [33mid[39m=[32m"baseUrl"[39m
    [33mplaceholder[39m=[32m"http://localhost:11434"[39m
    [33mvalue[39m=[32m"http://localhost:11434"[39m
  [36m/>[39m

  --------------------------------------------------
  combobox:

  Name "":
  [36m<button[39m
    [33maria-autocomplete[39m=[32m"none"[39m
    [33maria-controls[39m=[32m"radix-_r_3_"[39m
    [33maria-expanded[39m=[32m"false"[39m
    [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 glass-panel"[39m
    [33mdata-state[39m=[32m"closed"[39m
    [33mdir[39m=[32m"ltr"[39m
    [33mrole[39m=[32m"combobox"[39m
    [33mtype[39m=[32m"button"[39m
  [36m/>[39m

  --------------------------------------------------
  paragraph:

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"text-xs text-muted-foreground mt-1"[39m
  [36m/>[39m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"w-96 max-h-[80vh] glass-panel rounded-lg shadow-2xl overflow-hidden flex flex-col"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between p-4 border-b"[39m
      [36m>[39m
        [36m<h2[39m
          [33mclass[39m=[32m"text-lg font-semibold"[39m
        [36m>[39m
          [0mSettings[0m
        [36m</h2>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-9 rounded-md px-3"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-x h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M18 6 6 18"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"m6 6 12 12"[39m
            [36m/>[39m
          [36m</svg>[39m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 overflow-y-auto p-4 space-y-6"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border bg-card text-card-foreground shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"12"[39m
                  [33mcy[39m=[32m"12"[39m
                  [33mr[39m=[32m"3"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mGeneral Settings[0m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0 space-y-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
                [33mfor[39m=[32m"showArchived"[39m
              [36m>[39m
                [0mShow Archived Chats[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"rounded border-gray-300"[39m
                [33mid[39m=[32m"showArchived"[39m
                [33mtype[39m=[32m"checkbox"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
                [33mfor[39m=[32m"cacheToggle"[39m
              [36m>[39m
                [0mEnable Conversation Cache[0m
              [36m</label>[39m
              [36m<input[39m
                [33mchecked[39m=[32m""[39m
                [33mclass[39m=[32m"rounded border-gray-300"[39m
                [33mid[39m=[32m"cacheToggle"[39m
                [33mtype[39m=[32m"checkbox"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
                [33mfor[39m=[32m"ollamaUrl"[39m
              [36m>[39m
                [0mOllama Base URL[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm"[39m
                [33mid[39m=[32m"ollamaUrl"[39m
                [33mplaceholder[39m=[32m"http://localhost:11434"[39m
                [33mvalue[39m=[32m"http://localhost:11434"[39m
              [36m/>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-3"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
          [36m>[39m
            [0mProvider[0m
          [36m</label>[39m
          [36m<button[39m
            [33maria-autocomplete[39m=[32m"none"[39m
  ...
 âœ“ src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > shows API key management for non-local providers 13ms
 âœ“ src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > hides data transfer section by default 11ms
 âœ“ src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > shows data transfer section when clicked 29ms
 âœ“ src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > displays current model information 13ms
stderr | src/services/__tests__/stateManagement.test.ts
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stderr | src/services/__tests__/stateManagement.test.ts
[DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stderr | src/services/__tests__/stateManagement.test.ts > SettingsService > loadSettings > should handle invalid JSON gracefully
Failed to load settings: SyntaxError: Unexpected token 'i', "invalid json" is not valid JSON
    at JSON.parse (<anonymous>)
    at SettingsService.loadSettings [90m(/Users/forestmars/sandbox/polyglot/[39msrc/services/settingsService.ts:63:29[90m)[39m
    at [90m/Users/forestmars/sandbox/polyglot/[39msrc/services/__tests__/stateManagement.test.ts:84:46
    at [90mfile:///Users/forestmars/sandbox/polyglot/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Users/forestmars/sandbox/polyglot/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:912:26
    at [90mfile:///Users/forestmars/sandbox/polyglot/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1237:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/forestmars/sandbox/polyglot/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1203:10[90m)[39m
    at [90mfile:///Users/forestmars/sandbox/polyglot/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1647:37
    at Traces.$ [90m(file:///Users/forestmars/sandbox/polyglot/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m

stderr | src/services/__tests__/stateManagement.test.ts > SettingsService > saveSettings > should save settings to localStorage
Failed to load settings: SyntaxError: Unexpected token 'i', "invalid json" is not valid JSON
    at JSON.parse (<anonymous>)
    at SettingsService.loadSettings [90m(/Users/forestmars/sandbox/polyglot/[39msrc/services/settingsService.ts:63:29[90m)[39m
    at SettingsService.saveSettings [90m(/Users/forestmars/sandbox/polyglot/[39msrc/services/settingsService.ts:79:34[90m)[39m
    at [90m/Users/forestmars/sandbox/polyglot/[39msrc/services/__tests__/stateManagement.test.ts:98:29
    at [90mfile:///Users/forestmars/sandbox/polyglot/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Users/forestmars/sandbox/polyglot/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:912:26
    at [90mfile:///Users/forestmars/sandbox/polyglot/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1237:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/forestmars/sandbox/polyglot/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1203:10[90m)[39m
    at [90mfile:///Users/forestmars/sandbox/polyglot/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1647:37

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > initialization > should initialize successfully
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > initialization > should initialize successfully
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > initialization > should initialize successfully
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > initialization > should initialize successfully
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > initialization > should handle initialization errors gracefully
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > initialization > should handle initialization errors gracefully
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > initialization > should handle initialization errors gracefully
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > initialization > should handle initialization errors gracefully
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > state management > should notify listeners of state changes
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > state management > should notify listeners of state changes
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > state management > should notify listeners of state changes
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > state management > should notify listeners of state changes
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should create new conversations
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should create new conversations
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should create new conversations
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should create new conversations
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should create new conversations
Failed to delete empty/private-only conversation locally: [DexieError [DatabaseClosedError]: MissingAPIError IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
    inner: [1mnull[22m
  }
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should create new conversations
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should create new conversations
[StateManager] Loading conversations (showArchived: false)
[StateManager] Cleared conversation cache (was 0 items)

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should create new conversations
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should create new conversations
[StateManager] Loaded 0 conversations from storage
[StateManager] Cached 0 conversations
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should create new conversations
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: conv_1763677327598_pdwiy6upf

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should load conversations by ID
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should load conversations by ID
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should load conversations by ID
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should load conversations by ID
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should load conversations by ID
Failed to load conversation: [DexieError [DatabaseClosedError]: MissingAPIError IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
    inner: [1mnull[22m
  }
}

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should load conversations by ID
Failed to load conversation: [DexieError [DatabaseClosedError]: MissingAPIError IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
    inner: [1mnull[22m
  }
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should handle model switching
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should handle model switching
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should handle model switching
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should handle model switching
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should handle model switching
Failed to delete empty/private-only conversation locally: [DexieError [DatabaseClosedError]: MissingAPIError IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
    inner: [1mnull[22m
  }
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should handle model switching
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should handle model switching
[StateManager] Loading conversations (showArchived: false)
[StateManager] Cleared conversation cache (was 0 items)

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should handle model switching
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should handle model switching
[StateManager] Loaded 0 conversations from storage
[StateManager] Cached 0 conversations
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should handle model switching
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: conv_1763677327631_oj8mrocul

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should handle model switching
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: conv_1763677327631_oj8mrocul
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: conv_1763677327631_oj8mrocul

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should handle model switching
Failed to delete empty/private-only conversation locally: [DexieError [DatabaseClosedError]: MissingAPIError IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
    inner: [1mnull[22m
  }
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should handle model switching
[StateManager] Cached model switch for conversation conv_1763677327631_oj8mrocul

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should archive and unarchive conversations
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should archive and unarchive conversations
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should archive and unarchive conversations
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should archive and unarchive conversations
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should archive and unarchive conversations
Failed to delete empty/private-only conversation locally: [DexieError [DatabaseClosedError]: MissingAPIError IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
    inner: [1mnull[22m
  }
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should archive and unarchive conversations
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should archive and unarchive conversations
[StateManager] Loading conversations (showArchived: false)
[StateManager] Cleared conversation cache (was 0 items)

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should archive and unarchive conversations
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should archive and unarchive conversations
[StateManager] Loaded 0 conversations from storage
[StateManager] Cached 0 conversations
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should archive and unarchive conversations
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: conv_1763677327642_i5fw2q1wr

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should archive and unarchive conversations
Failed to toggle archive status: Error: Conversation not found
    at ConversationStateManager.toggleArchive [90m(/Users/forestmars/sandbox/polyglot/[39msrc/services/conversationStateManager.ts:358:32[90m)[39m
    at [90m/Users/forestmars/sandbox/polyglot/[39msrc/services/__tests__/stateManagement.test.ts:271:26
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mfile:///Users/forestmars/sandbox/polyglot/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:912:20

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should delete conversations
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should delete conversations
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should delete conversations
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should delete conversations
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should delete conversations
Failed to delete empty/private-only conversation locally: [DexieError [DatabaseClosedError]: MissingAPIError IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
    inner: [1mnull[22m
  }
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should delete conversations
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should delete conversations
[StateManager] Loading conversations (showArchived: false)
[StateManager] Cleared conversation cache (was 0 items)

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should delete conversations
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should delete conversations
[StateManager] Loaded 0 conversations from storage
[StateManager] Cached 0 conversations
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should delete conversations
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: conv_1763677327646_qraa6b90v

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should delete conversations
[StateManager] Pre-emptively clearing conversation conv_1763677327646_qraa6b90v from cache

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should delete conversations
Failed to delete conversation: [DexieError [DatabaseClosedError]: MissingAPIError IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
    inner: [1mnull[22m
  }
}

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should delete conversations
Failed to delete conversation: [DexieError [DatabaseClosedError]: MissingAPIError IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
    inner: [1mnull[22m
  }
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > search and filtering > should search conversations
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > search and filtering > should search conversations
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > search and filtering > should search conversations
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > search and filtering > should search conversations
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > search and filtering > should search conversations
[StateManager] Searching conversations with filters: {
  searchQuery: [32m'test'[39m,
  provider: [32m'ollama'[39m,
  model: [32m'llama3.2'[39m,
  showArchived: [33mfalse[39m,
  dateRange: [32m'not set'[39m
}
[StateManager] Loading conversations with showArchived=false

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > search and filtering > should search conversations
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > search and filtering > should search conversations
[StateManager] Found 0 conversations matching filters

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > search and filtering > should provide conversation statistics
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > search and filtering > should provide conversation statistics
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > search and filtering > should provide conversation statistics
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/services/__tests__/stateManagement.test.ts > ConversationStateManager > search and filtering > should provide conversation statistics
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

 Ã— src/services/__tests__/stateManagement.test.ts > SettingsService > loadSettings > should load default settings when none exist 4ms
   â†’ expected '' to be 'ollama' // Object.is equality
 âœ“ src/services/__tests__/stateManagement.test.ts > SettingsService > loadSettings > should load existing settings from localStorage 0ms
 Ã— src/services/__tests__/stateManagement.test.ts > SettingsService > loadSettings > should handle invalid JSON gracefully 1ms
   â†’ expected '' to be 'ollama' // Object.is equality
 âœ“ src/services/__tests__/stateManagement.test.ts > SettingsService > saveSettings > should save settings to localStorage 1ms
 âœ“ src/services/__tests__/stateManagement.test.ts > SettingsService > saveSettings > should merge with existing settings 0ms
 âœ“ src/services/__tests__/stateManagement.test.ts > SettingsService > updateSetting > should update a single setting 0ms
 âœ“ src/services/__tests__/stateManagement.test.ts > SettingsService > validation > should validate theme values 0ms
 âœ“ src/services/__tests__/stateManagement.test.ts > SettingsService > validation > should validate numeric values 0ms
 Ã— src/services/__tests__/stateManagement.test.ts > ConversationStateManager > initialization > should initialize successfully 2ms
   â†’ expected "vi.fn()" to be called at least once
 Ã— src/services/__tests__/stateManagement.test.ts > ConversationStateManager > initialization > should handle initialization errors gracefully 2ms
   â†’ expected 'IndexedDB API missing. Please visit hâ€¦' to be 'Storage failed' // Object.is equality
 Ã— src/services/__tests__/stateManagement.test.ts > ConversationStateManager > state management > should notify listeners of state changes 1ms
   â†’ expected true to be false // Object.is equality
 Ã— src/services/__tests__/stateManagement.test.ts > ConversationStateManager > state management > should provide readonly state access 1ms
   â†’ expected [Function] to throw an error
 Ã— src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should create new conversations 33ms
   â†’ expected "vi.fn()" to be called at least once
 Ã— src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should load conversations by ID 1ms
   â†’ MissingAPIError IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb
 âœ“ src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should handle model switching 10ms
 Ã— src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should archive and unarchive conversations 4ms
   â†’ Conversation not found
 Ã— src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should delete conversations 4ms
   â†’ MissingAPIError IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb
 Ã— src/services/__tests__/stateManagement.test.ts > ConversationStateManager > search and filtering > should search conversations 1ms
   â†’ expected "vi.fn()" to be called with arguments: [ 'test' ][90m

Number of calls: [1m0[22m
[39m
 âœ“ src/services/__tests__/stateManagement.test.ts > ConversationStateManager > search and filtering > should provide conversation statistics 0ms
 âœ“ src/services/__tests__/stateManagement.test.ts > ConversationStateManager > cleanup > should cleanup resources on destroy 0ms
 âœ“ src/services/__tests__/stateManagement.test.ts > ConversationUtils > ID generation > should generate unique IDs 0ms
 âœ“ src/services/__tests__/stateManagement.test.ts > ConversationUtils > title generation > should generate titles from short messages 0ms
 Ã— src/services/__tests__/stateManagement.test.ts > ConversationUtils > title generation > should truncate long messages 1ms
   â†’ Invalid Chai property: toEndWith
 âœ“ src/services/__tests__/stateManagement.test.ts > ConversationUtils > conversation creation > should create conversations with correct structure 0ms
 âœ“ src/services/__tests__/stateManagement.test.ts > ConversationUtils > model change tracking > should record model changes correctly 0ms
stdout | src/__tests__/services/mcpService.test.ts > mcpService discovery and prompt generation > discovers both configured servers and builds a structured cached prompt
ðŸ”Œ Initializing MCP service...
ðŸŒ Attempting to fetch /config/mcp.json...

stdout | src/__tests__/services/mcpService.test.ts > mcpService discovery and prompt generation > discovers both configured servers and builds a structured cached prompt
ðŸ“¥ Loaded MCP config from /config/mcp.json: [ [32m'day-server'[39m, [32m'email-tool'[39m ]
ðŸ“‹ Found 2 MCP servers in config: [ [32m'day-server'[39m, [32m'email-tool'[39m ]
ðŸ”— Attempting to connect to day-server at ws://localhost:9001...

stdout | src/__tests__/services/mcpService.test.ts > mcpService discovery and prompt generation > discovers both configured servers and builds a structured cached prompt
ðŸŸ¢ WebSocket connection established to day-server
ðŸ” Discovering tools from day-server...
ðŸ“¡ Sending tools/list request to day-server...

stdout | src/__tests__/services/mcpService.test.ts > mcpService discovery and prompt generation > discovers both configured servers and builds a structured cached prompt
ðŸ› ï¸ Received 1 tools from day-server: [ [32m'get_day'[39m ]

stdout | src/__tests__/services/mcpService.test.ts > mcpService discovery and prompt generation > discovers both configured servers and builds a structured cached prompt
âœ… Successfully connected to day-server
ðŸ”— Attempting to connect to email-tool at ws://localhost:3000...

stdout | src/__tests__/services/mcpService.test.ts > mcpService discovery and prompt generation > discovers both configured servers and builds a structured cached prompt
ðŸŸ¢ WebSocket connection established to email-tool
ðŸ” Discovering tools from email-tool...
ðŸ“¡ Sending tools/list request to email-tool...

stdout | src/__tests__/services/mcpService.test.ts > mcpService discovery and prompt generation > discovers both configured servers and builds a structured cached prompt
ðŸ› ï¸ Received 1 tools from email-tool: [ [32m'send_email'[39m ]

stdout | src/__tests__/services/mcpService.test.ts > mcpService discovery and prompt generation > discovers both configured servers and builds a structured cached prompt
âœ… Successfully connected to email-tool
ðŸ› ï¸ MCP initialization complete. Total tools available: 2

 Ã— src/__tests__/services/mcpService.test.ts > mcpService discovery and prompt generation > discovers both configured servers and builds a structured cached prompt 63ms
   â†’ expected 'Available tools:\n- get_day (server: â€¦' to contain 'tool_call'
stdout | tests/integration/mcpDayTool.integration.test.ts > MCP Day Tool Integration
ðŸ§ª Initializing mcpService...
ðŸ”Œ Initializing MCP service...
ðŸŒ Attempting to fetch /config/mcp.json...

stdout | tests/integration/mcpDayTool.integration.test.ts > MCP Day Tool Integration
ðŸ“¥ Loaded MCP config from /config/mcp.json: [ [32m'day-server'[39m ]
ðŸ“‹ Found 1 MCP servers in config: [ [32m'day-server'[39m ]
ðŸ”— Attempting to connect to day-server at ws://localhost:9001...

stdout | tests/integration/mcpDayTool.integration.test.ts > MCP Day Tool Integration
ðŸŸ¢ WebSocket connection established to day-server
ðŸ” Discovering tools from day-server...
ðŸ“¡ Sending tools/list request to day-server...

stdout | tests/integration/mcpDayTool.integration.test.ts > MCP Day Tool Integration
ðŸ› ï¸ Received 1 tools from day-server: [ [32m'get_day'[39m ]

stdout | tests/integration/mcpDayTool.integration.test.ts > MCP Day Tool Integration
âœ… Successfully connected to day-server
ðŸ› ï¸ MCP initialization complete. Total tools available: 1

stdout | tests/integration/mcpDayTool.integration.test.ts > MCP Day Tool Integration
ðŸ§ª mcpService ready
ðŸ§ª Available tools: [ [32m'get_day (day-server)'[39m ]

stdout | tests/integration/mcpDayTool.integration.test.ts > MCP Day Tool Integration > should know what day of the week it is via MCP tool
ðŸ”§ Calling tool get_day on day-server with args: {}

stdout | tests/integration/mcpDayTool.integration.test.ts > MCP Day Tool Integration > should know what day of the week it is via MCP tool
âœ¨ Tool get_day result: Today is Thursday

stdout | tests/integration/mcpDayTool.integration.test.ts > MCP Day Tool Integration > should handle "what day of the week" phrasing
ðŸ”§ Calling tool get_day on day-server with args: {}

stdout | tests/integration/mcpDayTool.integration.test.ts > MCP Day Tool Integration > should handle "what day of the week" phrasing
âœ¨ Tool get_day result: Today is Thursday

stdout | tests/integration/mcpDayTool.integration.test.ts > MCP Day Tool Integration > should handle "today" keyword
ðŸ”§ Calling tool get_day on day-server with args: {}

stdout | tests/integration/mcpDayTool.integration.test.ts > MCP Day Tool Integration > should handle "today" keyword
âœ¨ Tool get_day result: Today is Thursday

stdout | tests/integration/mcpDayTool.integration.test.ts > MCP Day Tool Integration > should correctly answer what day tomorrow is
ðŸ”§ Calling tool get_day on day-server with args: {}

stdout | tests/integration/mcpDayTool.integration.test.ts > MCP Day Tool Integration > should correctly answer what day tomorrow is
âœ¨ Tool get_day result: Today is Thursday

 âœ“ tests/integration/mcpDayTool.integration.test.ts > MCP Day Tool Integration > should know what day of the week it is via MCP tool 23ms
 âœ“ tests/integration/mcpDayTool.integration.test.ts > MCP Day Tool Integration > should handle "what day of the week" phrasing 2ms
 âœ“ tests/integration/mcpDayTool.integration.test.ts > MCP Day Tool Integration > should handle "today" keyword 1ms
 Ã— tests/integration/mcpDayTool.integration.test.ts > MCP Day Tool Integration > should correctly answer what day tomorrow is 3ms
   â†’ expected 'Today is Thursday' to be null
 âœ“ src/__tests__/hooks/use-toast.test.tsx > useToast hook > toast function > should create a toast with basic properties 1ms
 âœ“ src/__tests__/hooks/use-toast.test.tsx > useToast hook > toast function > should create a toast with different variants 0ms
 âœ“ src/__tests__/hooks/use-toast.test.tsx > useToast hook > toast function > should create a toast with action 0ms
 âœ“ src/__tests__/hooks/use-toast.test.tsx > useToast hook > toast function > should create a toast with custom duration 0ms
 âœ“ src/__tests__/hooks/use-toast.test.tsx > useToast hook > useToast hook > should return toast state and functions 7ms
 âœ“ src/__tests__/hooks/use-toast.test.tsx > useToast hook > useToast hook > should add toast to state when created 2ms
 Ã— src/__tests__/hooks/use-toast.test.tsx > useToast hook > useToast hook > should dismiss toast when dismiss is called 7ms
   â†’ expected [ { title: 'Test Toast', â€¦(3) } ] to have a length of +0 but got 1
 Ã— src/__tests__/hooks/use-toast.test.tsx > useToast hook > useToast hook > should dismiss all toasts when no id is provided 1ms
   â†’ expected [ Array(1) ] to have a length of 3 but got 1
 Ã— src/__tests__/hooks/use-toast.test.tsx > useToast hook > useToast hook > should handle multiple toasts 2ms
   â†’ expected [ { title: 'Third Toast', â€¦(3) } ] to have a length of 3 but got 1
 Ã— src/__tests__/hooks/use-toast.test.tsx > useToast hook > useToast hook > should generate unique ids for each toast 1ms
   â†’ expected [ '16' ] to have a length of 2 but got 1
 âœ“ src/__tests__/hooks/use-toast.test.tsx > useToast hook > useToast hook > should handle toast with only title 1ms
 âœ“ src/__tests__/hooks/use-toast.test.tsx > useToast hook > useToast hook > should handle toast with only description 1ms
 âœ“ src/__tests__/hooks/use-toast.test.tsx > useToast hook > useToast hook > should handle empty toast 2ms
 Ã— src/__tests__/hooks/use-toast.test.tsx > useToast hook > useToast hook > should maintain toast order 2ms
   â†’ expected [ 'Third' ] to deeply equal [ 'First', 'Second', 'Third' ]
 âœ“ src/__tests__/hooks/use-toast.test.tsx > useToast hook > useToast hook > should handle dismiss of non-existent toast 2ms
 âœ“ src/__tests__/hooks/use-toast.test.tsx > useToast hook > toast variants > should handle default variant 1ms
 âœ“ src/__tests__/hooks/use-toast.test.tsx > useToast hook > toast variants > should handle destructive variant 1ms
 âœ“ src/__tests__/hooks/use-toast.test.tsx > useToast hook > toast duration > should use default duration when not specified 1ms
 âœ“ src/__tests__/hooks/use-toast.test.tsx > useToast hook > toast duration > should use custom duration when specified 1ms
stdout | src/__tests__/components/ChatInterface.test.tsx > ChatInterface > renders chat messages
[Sidebar] Rendered. Conversations: []
=== DEBUG: Loading conversations with filters ===
Current filters: {
  showArchived: [33mfalse[39m,
  filterProvider: [32m''[39m,
  filterModel: [32m''[39m,
  searchQuery: [32m''[39m
}

stderr | src/__tests__/components/ChatInterface.test.tsx > ChatInterface > renders chat messages
Failed to load conversations: TypeError: Cannot read properties of undefined (reading 'length')
    at loadFilteredConversations [90m(/Users/forestmars/sandbox/polyglot/[39msrc/components/ConversationSidebar.tsx:98:61[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m

 Ã— src/__tests__/components/ChatInterface.test.tsx > ChatInterface > renders chat messages 45ms
   â†’ scrollElement.scrollTo is not a function
 Ã— src/__tests__/components/ChatInterface.test.tsx > ChatInterface > allows sending a new message 1ms
   â†’ useConversationState is not defined
 Ã— src/__tests__/components/ChatInterface.test.tsx > ChatInterface > shows loading state when sending a message 0ms
   â†’ useConversationState is not defined
 Ã— src/__tests__/components/ChatInterface.test.tsx > ChatInterface > displays error message when there is an error 0ms
   â†’ useConversationState is not defined
 Ã— src/__tests__/components/ChatInterface.test.tsx > ChatInterface > allows switching models 0ms
   â†’ useConversationState is not defined
stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > handles search input changes
[Sidebar] Rendered. Conversations: []
=== DEBUG: Loading conversations with filters ===
Current filters: {
  showArchived: [33mfalse[39m,
  filterProvider: [32m''[39m,
  filterModel: [32m''[39m,
  searchQuery: [32m''[39m
}
[StateManager] Searching conversations with filters: {
  searchQuery: [32m''[39m,
  provider: [32m''[39m,
  model: [32m''[39m,
  showArchived: [33mfalse[39m,
  dateRange: [32m'not set'[39m
}
[StateManager] Loading conversations with showArchived=false
=== DEBUG: Loading conversations with filters ===
Current filters: {
  showArchived: [33mfalse[39m,
  filterProvider: [32m''[39m,
  filterModel: [32m''[39m,
  searchQuery: [32m'test query'[39m
}
[StateManager] Searching conversations with filters: {
  searchQuery: [32m'test query'[39m,
  provider: [32m''[39m,
  model: [32m''[39m,
  showArchived: [33mfalse[39m,
  dateRange: [32m'not set'[39m
}
[StateManager] Loading conversations with showArchived=false
Direct IndexedDB test: [33m0[39m
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m
[StateManager] Found 0 conversations matching filters
[StateManager] Found 0 conversations matching filters

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > handles search input changes
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > handles search input changes
[ConversationSidebar] Loaded 0 conversations (showArchived: false)
[ConversationSidebar] Loaded 0 conversations (showArchived: false)

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > handles search input changes
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > handles search input changes
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > handles search input changes
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > handles search input changes
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > toggles archive visibility
[Sidebar] Rendered. Conversations: []
=== DEBUG: Loading conversations with filters ===
Current filters: {
  showArchived: [33mfalse[39m,
  filterProvider: [32m''[39m,
  filterModel: [32m''[39m,
  searchQuery: [32m''[39m
}
[StateManager] Searching conversations with filters: {
  searchQuery: [32m''[39m,
  provider: [32m''[39m,
  model: [32m''[39m,
  showArchived: [33mfalse[39m,
  dateRange: [32m'not set'[39m
}
[StateManager] Loading conversations with showArchived=false
=== DEBUG: Loading conversations with filters ===
Current filters: {
  showArchived: [33mtrue[39m,
  filterProvider: [32m''[39m,
  filterModel: [32m''[39m,
  searchQuery: [32m''[39m
}
[StateManager] Searching conversations with filters: {
  searchQuery: [32m''[39m,
  provider: [32m''[39m,
  model: [32m''[39m,
  showArchived: [33mtrue[39m,
  dateRange: [32m'not set'[39m
}
[StateManager] Loading conversations with showArchived=true
Direct IndexedDB test: [33m0[39m
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m
[StateManager] Found 0 conversations matching filters
[StateManager] Found 0 conversations matching filters

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > toggles archive visibility
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > toggles archive visibility
[ConversationSidebar] Loaded 0 conversations (showArchived: false)
[ConversationSidebar] Loaded 0 conversations (showArchived: true)

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > toggles archive visibility
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > toggles archive visibility
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > toggles archive visibility
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > toggles archive visibility
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows conversation count
[Sidebar] Rendered. Conversations: []
=== DEBUG: Loading conversations with filters ===
Current filters: {
  showArchived: [33mfalse[39m,
  filterProvider: [32m''[39m,
  filterModel: [32m''[39m,
  searchQuery: [32m''[39m
}
[StateManager] Searching conversations with filters: {
  searchQuery: [32m''[39m,
  provider: [32m''[39m,
  model: [32m''[39m,
  showArchived: [33mfalse[39m,
  dateRange: [32m'not set'[39m
}
[StateManager] Loading conversations with showArchived=false
Direct IndexedDB test: [33m0[39m
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m
[StateManager] Found 0 conversations matching filters

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows conversation count
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows conversation count
[ConversationSidebar] Loaded 0 conversations (showArchived: false)

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows conversation count
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows conversation count
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows conversation count
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows conversation count
[Sidebar] Rendered. Conversations: []

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > renders with correct width and styling
[Sidebar] Rendered. Conversations: []
=== DEBUG: Loading conversations with filters ===
Current filters: {
  showArchived: [33mfalse[39m,
  filterProvider: [32m''[39m,
  filterModel: [32m''[39m,
  searchQuery: [32m''[39m
}
[StateManager] Searching conversations with filters: {
  searchQuery: [32m''[39m,
  provider: [32m''[39m,
  model: [32m''[39m,
  showArchived: [33mfalse[39m,
  dateRange: [32m'not set'[39m
}
[StateManager] Loading conversations with showArchived=false
Direct IndexedDB test: [33m0[39m
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m
[StateManager] Found 0 conversations matching filters

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > renders with correct width and styling
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > renders with correct width and styling
[ConversationSidebar] Loaded 0 conversations (showArchived: false)

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > renders with correct width and styling
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > renders with correct width and styling
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > renders with correct width and styling
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > renders with correct width and styling
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > has proper accessibility attributes
[Sidebar] Rendered. Conversations: []
=== DEBUG: Loading conversations with filters ===
Current filters: {
  showArchived: [33mfalse[39m,
  filterProvider: [32m''[39m,
  filterModel: [32m''[39m,
  searchQuery: [32m''[39m
}
[StateManager] Searching conversations with filters: {
  searchQuery: [32m''[39m,
  provider: [32m''[39m,
  model: [32m''[39m,
  showArchived: [33mfalse[39m,
  dateRange: [32m'not set'[39m
}
[StateManager] Loading conversations with showArchived=false
Direct IndexedDB test: [33m0[39m
[StateManager] Cache enabled
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m
[StateManager] Found 0 conversations matching filters

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > has proper accessibility attributes
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
Failed to list conversations: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > has proper accessibility attributes
[ConversationSidebar] Loaded 0 conversations (showArchived: false)

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > has proper accessibility attributes
An update to ConversationSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > has proper accessibility attributes
Database initialization failed: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

stdout | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > has proper accessibility attributes
[StateManager] setState called. Previous conv IDs: [] New conv IDs: [] Current: [90mundefined[39m

stderr | src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > has proper accessibility attributes
Failed to initialize conversation state manager: [DexieError [MissingAPIError]: IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb] {
  inner: [1mnull[22m
}

 Ã— src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows empty state when no conversations exist 1006ms
   â†’ Unable to find an element with the text: No conversations yet. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex flex-col h-full bg-background border-r border-border"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4 pb-2 border-b border-border"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between mb-3"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-lg font-semibold mr-4"[39m
          [36m>[39m
            [0mConversations[0m
          [36m</h2>[39m
          [36m<button[39m
            [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-primary text-primary-foreground hover:bg-primary/90 rounded-md h-8 px-3 whitespace-nowrap"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-plus w-4 h-4 mr-1"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"M5 12h14"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M12 5v14"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mNew Chat[0m
          [36m</button>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"relative mb-3"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"m21 21-4.34-4.34"[39m
            [36m/>[39m
            [36m<circle[39m
              [33mcx[39m=[32m"11"[39m
              [33mcy[39m=[32m"11"[39m
              [33mr[39m=[32m"8"[39m
            [36m/>[39m
          [36m</svg>[39m
          [36m<input[39m
            [33mclass[39m=[32m"flex w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm pl-10 pr-4 h-9"[39m
            [33mplaceholder[39m=[32m"Search conversations..."[39m
            [33mvalue[39m=[32m""[39m
          [36m/>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center gap-2 mb-3"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-funnel w-4 h-4 text-muted-foreground"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
            [36m/>[39m
          [36m</svg>[39m
          [36m<span[39m
            [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
          [36m>[39m
            [0mFilters:[0m
          [36m</span>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between"[39m
        [36m>[39m
          [36m<button[39m
            [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground rounded-md h-7 px-2 text-xs"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-archive w-3 h-3 mr-1"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<rect[39m
                [33mheight[39m=[32m"5"[39m
                [33mrx[39m=[32m"1"[39m
                [33mwidth[39m=[32m"20"[39m
                [33mx[39m=[32m"2"[39m
                [33my[39m=[32m"3"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M10 12h4"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mShow[0m
            [0m Archived[0m
          [36m</button>[39m
          [36m<span[39m
            [33mclass[39m=[32m"text-xs text-muted-foreground"[39m
          [36m>[39m
            [0m0[0m
            [0m conversation[0m
            [0ms[0m
          [36m</span>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"relative overflow-hidden flex-1"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mstyle[39m=[32m"position: relative; --radix-scroll-area-corner-width: 0px; --radix-scroll-area-corner-height: 0px;"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-full w-full rounded-[inherit]"[39m
          [33mdata-radix-scroll-area-viewport[39m=[32m""[39m
          [33mstyle[39m=[32m"overflow-x: hidden; overflow-y: scroll;"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"min-width: 100%; display: table;"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"p-4 text-center text-muted-foreground"[39m
            [36m>[39m
              [36m<p>[39m
                [0mNo conversations yet. Start chatting to create one![0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex flex-col h-full bg-background border-r border-border"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-4 pb-2 border-b border-border"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-3"[39m
          [36m>[39m
            [36m<h2[39m
              [33mclass[39m=[32m"text-lg font-semibold mr-4"[39m
            [36m>[39m
              [0mConversations[0m
            [36m</h2>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-primary text-primary-foreground hover:bg-primary/90 rounded-md h-8 px-3 whitespace-nowrap"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-plus w-4 h-4 mr-1"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M5 12h14"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M12 5v14"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mNew Chat[0m
            [36m</button>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative mb-3"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m21 21-4.34-4.34"[39m
              [36m/>[39m
              [36m<circle[39m
                [33mcx[39m=[32m"11"[39m
                [33mcy[39m=[32m"11"[39m
                [33mr[39m=[32m"8"[39m
              [36m/>[39m
            [36m</svg>[39m
            [36m<input[39m
              [33mclass[39m=[32m"flex w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm pl-10 pr-4 h-9"[39m
              [33mplaceholder[39m=[32m"Search conversations..."[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-2 mb-3"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-funnel w-4 h-4 text-muted-foreground"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
              [36m/>[39m
            [36m</svg>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
            [36m>[39m
              [0mFilters:[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground rounded-md h-7 px-2 text-xs"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-archive w-3 h-3 mr-1"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<rect[39m
                  [33mheight[39m=[32m"5"[39m
                  [33mrx[39m=[32m"1"[39m
                  [33mwidth[39m=[32m"20"[39m
                  [33mx[39m=[32m"2"[39m
                  [33my[39m=[32m"3"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M10 12h4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mShow[0m
              [0m Archived[0m
            [36m</button>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-muted-foreground"[39m
            [36m>[39m
              [0m0[0m
              [0m conversation[0m
              [0ms[0m
            [36m</span>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"relative overflow-hidden flex-1"[39m
          [33mdir[39m=[32m"ltr"[39m
          [33mstyle[39m=[32m"position: relative; --radix-scroll-area-corner-width: 0px; --radix-scroll-area-corner-height: 0px;"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"h-full w-full rounded-[inherit]"[39m
            [33mdata-radix-scroll-area-viewport[39m=[32m""[39m
            [33mstyle[39m=[32m"overflow-x: hidden; overflow-y: scroll;"[39m
          [36m>[39m
            [36m<div[39m
              [33mstyle[39m=[32m"min-width: 100%; display: table;"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"p-4 text-center text-muted-foreground"[39m
              [36m>[39m
                [36m<p>[39m
                  [0mNo conversations yet. Start chatting to create one![0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
 âœ“ src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > handles search input changes 8ms
 âœ“ src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > toggles archive visibility 8ms
 âœ“ src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows conversation count 7ms
 Ã— src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > renders with correct width and styling 6ms
   â†’ [2mexpect([22m[31melement[39m[2m).toHaveClass([22m[32m[32m"flex flex-col h-full bg-background border-r border-border"[32m[39m[2m)[22m

Expected the element to have class:
[32m  flex flex-col h-full bg-background border-r border-border[39m
Received:
[31m  flex items-center justify-between mb-3[39m
 âœ“ src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > has proper accessibility attributes 4ms
 âœ“ src/__tests__/hooks/use-mobile.test.tsx > useIsMobile hook > should return false for desktop screen width 10ms
 âœ“ src/__tests__/hooks/use-mobile.test.tsx > useIsMobile hook > should return true for mobile screen width 2ms
 âœ“ src/__tests__/hooks/use-mobile.test.tsx > useIsMobile hook > should return true for tablet screen width (edge case) 2ms
 âœ“ src/__tests__/hooks/use-mobile.test.tsx > useIsMobile hook > should return false for tablet screen width (above breakpoint) 1ms
 âœ“ src/__tests__/hooks/use-mobile.test.tsx > useIsMobile hook > should call matchMedia with correct query 2ms
 Ã— src/__tests__/hooks/use-mobile.test.tsx > useIsMobile hook > should handle window resize events 5ms
   â†’ expected false to be true // Object.is equality
 âœ“ src/__tests__/hooks/use-mobile.test.tsx > useIsMobile hook > should handle media query change events 1ms
 âœ“ src/__tests__/hooks/use-mobile.test.tsx > useIsMobile hook > should cleanup event listeners on unmount 1ms
 âœ“ src/__tests__/hooks/use-mobile.test.tsx > useIsMobile hook > should handle edge case of very small screen 2ms
 âœ“ src/__tests__/hooks/use-mobile.test.tsx > useIsMobile hook > should handle edge case of very large screen 1ms
 âœ“ src/__tests__/hooks/use-mobile.test.tsx > useIsMobile hook > should return boolean value 1ms
 âœ“ src/services/__tests__/storage.test.ts > StorageService > initialization > should initialize with correct directory paths 1ms
 âœ“ src/services/__tests__/storage.test.ts > StorageService > conversation operations > should create a conversation with correct structure 12ms
 âœ“ src/services/__tests__/storage.test.ts > StorageService > conversation operations > should generate title from first user message 0ms
 Ã— src/services/__tests__/storage.test.ts > StorageService > conversation operations > should truncate long titles appropriately 3ms
   â†’ Invalid Chai property: toEndWith
 âœ“ src/services/__tests__/storage.test.ts > StorageService > conversation operations > should add messages to conversation 1ms
 âœ“ src/services/__tests__/storage.test.ts > StorageService > conversation operations > should record model changes 0ms
 âœ“ src/services/__tests__/storage.test.ts > StorageService > conversation metadata > should extract metadata correctly 0ms
 âœ“ src/services/__tests__/storage.test.ts > StorageService > conversation metadata > should get conversation summary 0ms
 âœ“ src/services/__tests__/storage.test.ts > StorageService > conversation metadata > should handle empty conversations 0ms
 âœ“ src/services/__tests__/storage.test.ts > StorageService > validation > should validate correct conversation data 0ms
 âœ“ src/services/__tests__/storage.test.ts > StorageService > validation > should reject invalid conversation data 0ms
 Ã— src/services/__tests__/storage.test.ts > StorageService > sanitization > should remove API keys from messages 1ms
   â†’ expected 'My API key is: sk-1234567890abcdef' to be 'My API key is: [REDACTED]' // Object.is equality
 âœ“ src/__tests__/utils/utils.test.ts > cn utility function > should merge class names correctly 3ms
 âœ“ src/__tests__/utils/utils.test.ts > cn utility function > should handle conditional classes 0ms
 âœ“ src/__tests__/utils/utils.test.ts > cn utility function > should handle undefined and null values 0ms
 âœ“ src/__tests__/utils/utils.test.ts > cn utility function > should handle empty strings 0ms
 âœ“ src/__tests__/utils/utils.test.ts > cn utility function > should handle arrays of classes 0ms
 âœ“ src/__tests__/utils/utils.test.ts > cn utility function > should handle objects with conditional classes 0ms
 âœ“ src/__tests__/utils/utils.test.ts > cn utility function > should handle mixed input types 0ms
 Ã— src/__tests__/utils/utils.test.ts > cn utility function > should handle Tailwind class conflicts 3ms
   â†’ expected 'text-blue-500' to be 'text-red-500 text-blue-500' // Object.is equality
 âœ“ src/__tests__/utils/utils.test.ts > cn utility function > should handle complex conditional logic 0ms
 âœ“ src/__tests__/utils/utils.test.ts > cn utility function > should handle no arguments 0ms
 âœ“ src/__tests__/utils/utils.test.ts > cn utility function > should handle single argument 0ms
 âœ“ src/tests/server/chatSync.unit.test.ts > Chat Sync API - Unit Tests > should create, delete, and verify removal of a chat 23ms
 âœ“ src/tests/server/chatSync.unit.test.ts > Chat Sync API - Unit Tests > should handle deleting non-existent chat 6ms
 âœ“ src/tests/server/chatSync.unit.test.ts > Chat Sync API - Unit Tests > should handle missing chat ID in delete request 5ms
 âœ“ src/tests/server/chatSync.unit.test.ts > Chat Sync API - Unit Tests > should delete multiple chats 12ms
 âœ“ src/tests/server/chatSync.unit.test.ts > Chat Sync API - Unit Tests > should fetch all chats 6ms
 âœ“ src/tests/server/chatSync.unit.test.ts > Chat Sync API - Unit Tests > should handle CORS preflight 4ms

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯ Failed Suites 2 âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯

 FAIL  tools/email-tool/src/gmail.test.ts [ tools/email-tool/src/gmail.test.ts ]
Error: No test suite found in file /Users/forestmars/sandbox/polyglot/tools/email-tool/src/gmail.test.ts
âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/37]âŽ¯

 FAIL  tools/email-tool/src/mcp.test.ts [ tools/email-tool/src/mcp.test.ts ]
Error: No test suite found in file /Users/forestmars/sandbox/polyglot/tools/email-tool/src/mcp.test.ts
âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/37]âŽ¯


âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯ Failed Tests 35 âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯

 FAIL  src/__tests__/components/ChatInterface.test.tsx > ChatInterface > renders chat messages
TypeError: scrollElement.scrollTo is not a function
 â¯ scrollToBottom src/components/ChatInterface.tsx:576:23
    574|       );
    575|       if (scrollElement) {
    576|         scrollElement.scrollTo({
       |                       ^
    577|           top: scrollElement.scrollHeight,
    578|           behavior: "smooth",
 â¯ src/components/ChatInterface.tsx:587:5
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25989:20
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ commitHookEffectListMount node_modules/react-dom/cjs/react-dom-client.development.js:13249:29
 â¯ commitHookPassiveMountEffects node_modules/react-dom/cjs/react-dom-client.development.js:13336:11
 â¯ commitPassiveMountOnFiber node_modules/react-dom/cjs/react-dom-client.development.js:15484:13
 â¯ recursivelyTraversePassiveMountEffects node_modules/react-dom/cjs/react-dom-client.development.js:15439:11
 â¯ commitPassiveMountOnFiber node_modules/react-dom/cjs/react-dom-client.development.js:15519:11
 â¯ flushPassiveEffects node_modules/react-dom/cjs/react-dom-client.development.js:18432:9

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/37]âŽ¯

 FAIL  src/__tests__/components/ChatInterface.test.tsx > ChatInterface > allows sending a new message
ReferenceError: useConversationState is not defined
 â¯ src/__tests__/components/ChatInterface.test.tsx:70:15
     68|   it('allows sending a new message', async () => {
     69|     const mockAddMessage = vi.fn();
     70|     vi.mocked(useConversationState).mockImplementation(() => ({
       |               ^
     71|       ...useConversationState(),
     72|       addMessage: mockAddMessage

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/37]âŽ¯

 FAIL  src/__tests__/components/ChatInterface.test.tsx > ChatInterface > shows loading state when sending a message
ReferenceError: useConversationState is not defined
 â¯ src/__tests__/components/ChatInterface.test.tsx:95:15
     93| 
     94|   it('shows loading state when sending a message', async () => {
     95|     vi.mocked(useConversationState).mockImplementation(() => ({
       |               ^
     96|       ...useConversationState(),
     97|       state: {

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/37]âŽ¯

 FAIL  src/__tests__/components/ChatInterface.test.tsx > ChatInterface > displays error message when there is an error
ReferenceError: useConversationState is not defined
 â¯ src/__tests__/components/ChatInterface.test.tsx:109:15
    107| 
    108|   it('displays error message when there is an error', () => {
    109|     vi.mocked(useConversationState).mockImplementation(() => ({
       |               ^
    110|       ...useConversationState(),
    111|       state: {

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/37]âŽ¯

 FAIL  src/__tests__/components/ChatInterface.test.tsx > ChatInterface > allows switching models
ReferenceError: useConversationState is not defined
 â¯ src/__tests__/components/ChatInterface.test.tsx:124:15
    122|   it('allows switching models', () => {
    123|     const mockSwitchModel = vi.fn();
    124|     vi.mocked(useConversationState).mockImplementation(() => ({
       |               ^
    125|       ...useConversationState(),
    126|       switchModel: mockSwitchModel

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/37]âŽ¯

 FAIL  src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > displays list of conversations
TestingLibraryElementError: Unable to find an element with the text: First Chat. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex flex-col h-full bg-background border-r border-border"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4 pb-2 border-b border-border"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between mb-3"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-lg font-semibold mr-4"[39m
          [36m>[39m
            [0mConversations[0m
          [36m</h2>[39m
          [36m<button[39m
            [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-primary text-primary-foreground hover:bg-primary/90 rounded-md h-8 px-3 whitespace-nowrap"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-plus w-4 h-4 mr-1"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"M5 12h14"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M12 5v14"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mNew Chat[0m
          [36m</button>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"relative mb-3"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"m21 21-4.34-4.34"[39m
            [36m/>[39m
            [36m<circle[39m
              [33mcx[39m=[32m"11"[39m
              [33mcy[39m=[32m"11"[39m
              [33mr[39m=[32m"8"[39m
            [36m/>[39m
          [36m</svg>[39m
          [36m<input[39m
            [33mclass[39m=[32m"flex w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm pl-10 pr-4 h-9"[39m
            [33mplaceholder[39m=[32m"Search conversations..."[39m
            [33mvalue[39m=[32m""[39m
          [36m/>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center gap-2 mb-3"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-funnel w-4 h-4 text-muted-foreground"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
            [36m/>[39m
          [36m</svg>[39m
          [36m<span[39m
            [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
          [36m>[39m
            [0mFilters:[0m
          [36m</span>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between"[39m
        [36m>[39m
          [36m<button[39m
            [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground rounded-md h-7 px-2 text-xs"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-archive w-3 h-3 mr-1"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<rect[39m
                [33mheight[39m=[32m"5"[39m
                [33mrx[39m=[32m"1"[39m
                [33mwidth[39m=[32m"20"[39m
                [33mx[39m=[32m"2"[39m
                [33my[39m=[32m"3"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M10 12h4"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mShow[0m
            [0m Archived[0m
          [36m</button>[39m
          [36m<span[39m
            [33mclass[39m=[32m"text-xs text-muted-foreground"[39m
          [36m>[39m
            [0m0[0m
            [0m conversation[0m
            [0ms[0m
          [36m</span>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"relative overflow-hidden flex-1"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mstyle[39m=[32m"position: relative; --radix-scroll-area-corner-width: 0px; --radix-scroll-area-corner-height: 0px;"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-full w-full rounded-[inherit]"[39m
          [33mdata-radix-scroll-area-viewport[39m=[32m""[39m
          [33mstyle[39m=[32m"overflow-x: hidden; overflow-y: scroll;"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"min-width: 100%; display: table;"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"p-4 text-center text-muted-foreground"[39m
            [36m>[39m
              [36m<p>[39m
                [0mNo conversations yet. Start chatting to create one![0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 â¯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 â¯ getByText node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 â¯ src/__tests__/components/ConversationSidebar.test.tsx:58:19
     56|     );
     57| 
     58|     expect(screen.getByText('First Chat')).toBeInTheDocument();
       |                   ^
     59|     expect(screen.getByText('Second Chat')).toBeInTheDocument();
     60|   });

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/37]âŽ¯

 FAIL  src/__tests__/components/ConversationSidebar.test.tsx > ConversationSidebar > calls onConversationSelect when a conversation is clicked
TestingLibraryElementError: Unable to find an element with the text: Second Chat. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex flex-col h-full bg-background border-r border-border"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4 pb-2 border-b border-border"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between mb-3"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-lg font-semibold mr-4"[39m
          [36m>[39m
            [0mConversations[0m
          [36m</h2>[39m
          [36m<button[39m
            [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-primary text-primary-foreground hover:bg-primary/90 rounded-md h-8 px-3 whitespace-nowrap"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-plus w-4 h-4 mr-1"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"M5 12h14"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M12 5v14"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mNew Chat[0m
          [36m</button>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"relative mb-3"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"m21 21-4.34-4.34"[39m
            [36m/>[39m
            [36m<circle[39m
              [33mcx[39m=[32m"11"[39m
              [33mcy[39m=[32m"11"[39m
              [33mr[39m=[32m"8"[39m
            [36m/>[39m
          [36m</svg>[39m
          [36m<input[39m
            [33mclass[39m=[32m"flex w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm pl-10 pr-4 h-9"[39m
            [33mplaceholder[39m=[32m"Search conversations..."[39m
            [33mvalue[39m=[32m""[39m
          [36m/>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center gap-2 mb-3"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-funnel w-4 h-4 text-muted-foreground"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
            [36m/>[39m
          [36m</svg>[39m
          [36m<span[39m
            [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
          [36m>[39m
            [0mFilters:[0m
          [36m</span>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between"[39m
        [36m>[39m
          [36m<button[39m
            [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground rounded-md h-7 px-2 text-xs"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-archive w-3 h-3 mr-1"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<rect[39m
                [33mheight[39m=[32m"5"[39m
                [33mrx[39m=[32m"1"[39m
                [33mwidth[39m=[32m"20"[39m
                [33mx[39m=[32m"2"[39m
                [33my[39m=[32m"3"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M10 12h4"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mShow[0m
            [0m Archived[0m
          [36m</button>[39m
          [36m<span[39m
            [33mclass[39m=[32m"text-xs text-muted-foreground"[39m
          [36m>[39m
            [0m0[0m
            [0m conversation[0m
            [0ms[0m
          [36m</span>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"relative overflow-hidden flex-1"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mstyle[39m=[32m"position: relative; --radix-scroll-area-corner-width: 0px; --radix-scroll-area-corner-height: 0px;"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-full w-full rounded-[inherit]"[39m
          [33mdata-radix-scroll-area-viewport[39m=[32m""[39m
          [33mstyle[39m=[32m"overflow-x: hidden; overflow-y: scroll;"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"min-width: 100%; display: table;"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"p-4 text-center text-muted-foreground"[39m
            [36m>[39m
              [36m<p>[39m
                [0mNo conversations yet. Start chatting to create one![0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 â¯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 â¯ getByText node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 â¯ src/__tests__/components/ConversationSidebar.test.tsx:77:31
     75|     );
     76| 
     77|     const secondChat = screen.getByText('Second Chat');
       |                               ^
     78|     fireEvent.click(secondChat);
     79| 

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/37]âŽ¯

 FAIL  src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > renders provider selection
TestingLibraryElementError: Found multiple elements with the text: Ollama

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<span[39m
  [33mstyle[39m=[32m"pointer-events: none;"[39m
[36m>[39m
  [0mOllama[0m
[36m</span>[39m

Ignored nodes: comments, script, style
[36m<span>[39m
  [0mOllama[0m
[36m</span>[39m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"w-96 max-h-[80vh] glass-panel rounded-lg shadow-2xl overflow-hidden flex flex-col"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between p-4 border-b"[39m
      [36m>[39m
        [36m<h2[39m
          [33mclass[39m=[32m"text-lg font-semibold"[39m
        [36m>[39m
          [0mSettings[0m
        [36m</h2>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-9 rounded-md px-3"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-x h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M18 6 6 18"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"m6 6 12 12"[39m
            [36m/>[39m
          [36m</svg>[39m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 overflow-y-auto p-4 space-y-6"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border bg-card text-card-foreground shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"12"[39m
                  [33mcy[39m=[32m"12"[39m
                  [33mr[39m=[32m"3"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mGeneral Settings[0m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0 space-y-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
                [33mfor[39m=[32m"showArchived"[39m
              [36m>[39m
                [0mShow Archived Chats[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"rounded border-gray-300"[39m
                [33mid[39m=[32m"showArchived"[39m
                [33mtype[39m=[32m"checkbox"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
                [33mfor[39m=[32m"cacheToggle"[39m
              [36m>[39m
                [0mEnable Conversation Cache[0m
              [36m</label>[39m
              [36m<input[39m
                [33mchecked[39m=[32m""[39m
                [33mclass[39m=[32m"rounded border-gray-300"[39m
                [33mid[39m=[32m"cacheToggle"[39m
                [33mtype[39m=[32m"checkbox"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
                [33mfor[39m=[32m"ollamaUrl"[39m
              [36m>[39m
                [0mOllama Base URL[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm"[39m
                [33mid[39m=[32m"ollamaUrl"[39m
                [33mplaceholder[39m=[32m"http://localhost:11434"[39m
                [33mvalue[39m=[32m"http://localhost:11434"[39m
              [36m/>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-3"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
          [36m>[39m
            [0mProvider[0m
          [36m</label>[39m
          [36m<button[39m
            [33maria-autocomplete[39m=[32m"none"[39m
  ...
 â¯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 â¯ getElementError node_modules/@testing-library/dom/dist/query-helpers.js:20:35
 â¯ getMultipleElementsFoundError node_modules/@testing-library/dom/dist/query-helpers.js:23:10
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:55:13
 â¯ getByText node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 â¯ src/__tests__/components/SettingsPanel.test.tsx:43:19
     41|     render(<SettingsPanel {...defaultProps} />);
     42|     expect(screen.getByText('Provider')).toBeInTheDocument();
     43|     expect(screen.getByText('Ollama')).toBeInTheDocument();
       |                   ^
     44|   });
     45| 

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/37]âŽ¯

 FAIL  src/__tests__/components/SettingsPanel.test.tsx > SettingsPanel > allows switching providers
TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/provider/i`

Here are the accessible roles:

  heading:

  Name "Settings":
  [36m<h2[39m
    [33mclass[39m=[32m"text-lg font-semibold"[39m
  [36m/>[39m

  Name "General Settings":
  [36m<h3[39m
    [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
  [36m/>[39m

  Name "Ollama Status":
  [36m<h3[39m
    [33mclass[39m=[32m"font-semibold tracking-tight text-sm flex items-center gap-2"[39m
  [36m/>[39m

  Name "Current Configuration":
  [36m<h3[39m
    [33mclass[39m=[32m"font-semibold tracking-tight text-sm"[39m
  [36m/>[39m

  --------------------------------------------------
  button:

  Name "":
  [36m<button[39m
    [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-9 rounded-md px-3"[39m
  [36m/>[39m

  Name "Checking...":
  [36m<button[39m
    [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 rounded-md px-3 w-full"[39m
    [33mdisabled[39m=[32m""[39m
  [36m/>[39m

  Name "Data Transfer â–¼":
  [36m<button[39m
    [33mclass[39m=[32m"flex items-center gap-2 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors"[39m
  [36m/>[39m

  --------------------------------------------------
  checkbox:

  Name "Show Archived Chats":
  [36m<input[39m
    [33mclass[39m=[32m"rounded border-gray-300"[39m
    [33mid[39m=[32m"showArchived"[39m
    [33mtype[39m=[32m"checkbox"[39m
  [36m/>[39m

  Name "Enable Conversation Cache":
  [36m<input[39m
    [33mchecked[39m=[32m""[39m
    [33mclass[39m=[32m"rounded border-gray-300"[39m
    [33mid[39m=[32m"cacheToggle"[39m
    [33mtype[39m=[32m"checkbox"[39m
  [36m/>[39m

  --------------------------------------------------
  textbox:

  Name "Ollama Base URL":
  [36m<input[39m
    [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm"[39m
    [33mid[39m=[32m"ollamaUrl"[39m
    [33mplaceholder[39m=[32m"http://localhost:11434"[39m
    [33mvalue[39m=[32m"http://localhost:11434"[39m
  [36m/>[39m

  Name "Base URL":
  [36m<input[39m
    [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm glass-panel"[39m
    [33mid[39m=[32m"baseUrl"[39m
    [33mplaceholder[39m=[32m"http://localhost:11434"[39m
    [33mvalue[39m=[32m"http://localhost:11434"[39m
  [36m/>[39m

  --------------------------------------------------
  combobox:

  Name "":
  [36m<button[39m
    [33maria-autocomplete[39m=[32m"none"[39m
    [33maria-controls[39m=[32m"radix-_r_3_"[39m
    [33maria-expanded[39m=[32m"false"[39m
    [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 glass-panel"[39m
    [33mdata-state[39m=[32m"closed"[39m
    [33mdir[39m=[32m"ltr"[39m
    [33mrole[39m=[32m"combobox"[39m
    [33mtype[39m=[32m"button"[39m
  [36m/>[39m

  --------------------------------------------------
  paragraph:

  Name "":
  [36m<p[39m
    [33mclass[39m=[32m"text-xs text-muted-foreground mt-1"[39m
  [36m/>[39m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"w-96 max-h-[80vh] glass-panel rounded-lg shadow-2xl overflow-hidden flex flex-col"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-between p-4 border-b"[39m
      [36m>[39m
        [36m<h2[39m
          [33mclass[39m=[32m"text-lg font-semibold"[39m
        [36m>[39m
          [0mSettings[0m
        [36m</h2>[39m
        [36m<button[39m
          [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-9 rounded-md px-3"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-x h-4 w-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M18 6 6 18"[39m
            [36m/>[39m
            [36m<path[39m
              [33md[39m=[32m"m6 6 12 12"[39m
            [36m/>[39m
          [36m</svg>[39m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 overflow-y-auto p-4 space-y-6"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"rounded-lg border bg-card text-card-foreground shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight flex items-center gap-2"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                [36m/>[39m
                [36m<circle[39m
                  [33mcx[39m=[32m"12"[39m
                  [33mcy[39m=[32m"12"[39m
                  [33mr[39m=[32m"3"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mGeneral Settings[0m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 pt-0 space-y-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
                [33mfor[39m=[32m"showArchived"[39m
              [36m>[39m
                [0mShow Archived Chats[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"rounded border-gray-300"[39m
                [33mid[39m=[32m"showArchived"[39m
                [33mtype[39m=[32m"checkbox"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
                [33mfor[39m=[32m"cacheToggle"[39m
              [36m>[39m
                [0mEnable Conversation Cache[0m
              [36m</label>[39m
              [36m<input[39m
                [33mchecked[39m=[32m""[39m
                [33mclass[39m=[32m"rounded border-gray-300"[39m
                [33mid[39m=[32m"cacheToggle"[39m
                [33mtype[39m=[32m"checkbox"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
                [33mfor[39m=[32m"ollamaUrl"[39m
              [36m>[39m
                [0mOllama Base URL[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm"[39m
                [33mid[39m=[32m"ollamaUrl"[39m
                [33mplaceholder[39m=[32m"http://localhost:11434"[39m
                [33mvalue[39m=[32m"http://localhost:11434"[39m
              [36m/>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-3"[39m
        [36m>[39m
          [36m<label[39m
            [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"[39m
          [36m>[39m
            [0mProvider[0m
          [36m</label>[39m
          [36m<button[39m
            [33maria-autocomplete[39m=[32m"none"[39m
  ...
 â¯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 â¯ getByRole node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 â¯ src/__tests__/components/SettingsPanel.test.tsx:48:27
     46|   it('allows switching providers', () => {
     47|     render(<SettingsPanel {...defaultProps} />);
     48|     const select = screen.getByRole('combobox', { name: /provider/i });
       |                           ^
     49|     fireEvent.mouseDown(select);
     50|     const openaiOption = screen.getByText('OpenAI');

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/37]âŽ¯

 FAIL  src/__tests__/hooks/use-mobile.test.tsx > useIsMobile hook > should handle window resize events
AssertionError: expected false to be true // Object.is equality

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

 â¯ src/__tests__/hooks/use-mobile.test.tsx:119:28
    117|     rerender()
    118|     
    119|     expect(result.current).toBe(true)
       |                            ^
    120|   })
    121| 

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/37]âŽ¯

 FAIL  src/__tests__/hooks/use-toast.test.tsx > useToast hook > useToast hook > should dismiss toast when dismiss is called
AssertionError: expected [ { title: 'Test Toast', â€¦(3) } ] to have a length of +0 but got 1

[32m- Expected[39m
[31m+ Received[39m

[32m- 0[39m
[31m+ 1[39m

 â¯ src/__tests__/hooks/use-toast.test.tsx:111:37
    109|       })
    110| 
    111|       expect(result.current.toasts).toHaveLength(0)
       |                                     ^
    112|     })
    113| 

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/37]âŽ¯

 FAIL  src/__tests__/hooks/use-toast.test.tsx > useToast hook > useToast hook > should dismiss all toasts when no id is provided
AssertionError: expected [ Array(1) ] to have a length of 3 but got 1

[32m- Expected[39m
[31m+ Received[39m

[32m- 3[39m
[31m+ 1[39m

 â¯ src/__tests__/hooks/use-toast.test.tsx:123:37
    121|       })
    122| 
    123|       expect(result.current.toasts).toHaveLength(3)
       |                                     ^
    124| 
    125|       act(() => {

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[14/37]âŽ¯

 FAIL  src/__tests__/hooks/use-toast.test.tsx > useToast hook > useToast hook > should handle multiple toasts
AssertionError: expected [ { title: 'Third Toast', â€¦(3) } ] to have a length of 3 but got 1

[32m- Expected[39m
[31m+ Received[39m

[32m- 3[39m
[31m+ 1[39m

 â¯ src/__tests__/hooks/use-toast.test.tsx:141:37
    139|       })
    140| 
    141|       expect(result.current.toasts).toHaveLength(3)
       |                                     ^
    142|       expect(result.current.toasts[0].title).toBe('First Toast')
    143|       expect(result.current.toasts[1].title).toBe('Second Toast')

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[15/37]âŽ¯

 FAIL  src/__tests__/hooks/use-toast.test.tsx > useToast hook > useToast hook > should generate unique ids for each toast
AssertionError: expected [ '16' ] to have a length of 2 but got 1

[32m- Expected[39m
[31m+ Received[39m

[32m- 2[39m
[31m+ 1[39m

 â¯ src/__tests__/hooks/use-toast.test.tsx:156:19
    154| 
    155|       const ids = result.current.toasts.map(t => t.id)
    156|       expect(ids).toHaveLength(2)
       |                   ^
    157|       expect(ids[0]).not.toBe(ids[1])
    158|     })

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[16/37]âŽ¯

 FAIL  src/__tests__/hooks/use-toast.test.tsx > useToast hook > useToast hook > should maintain toast order
AssertionError: expected [ 'Third' ] to deeply equal [ 'First', 'Second', 'Third' ]

[32m- Expected[39m
[31m+ Received[39m

[2m  [[22m
[32m-   "First",[39m
[32m-   "Second",[39m
[2m    "Third",[22m
[2m  ][22m

 â¯ src/__tests__/hooks/use-toast.test.tsx:205:22
    203| 
    204|       const titles = result.current.toasts.map(t => t.title)
    205|       expect(titles).toEqual(['First', 'Second', 'Third'])
       |                      ^
    206|     })
    207| 

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[17/37]âŽ¯

 FAIL  src/__tests__/services/mcpService.test.ts > mcpService discovery and prompt generation > discovers both configured servers and builds a structured cached prompt
AssertionError: expected 'Available tools:\n- get_day (server: â€¦' to contain 'tool_call'

[32m- Expected[39m
[31m+ Received[39m

[32m- tool_call[39m
[31m+ Available tools:[39m
[31m+ - get_day (server: day-server): Returns current day of the week[39m
[31m+ - send_email (server: email-tool): Send an email via SMTP[39m
[31m+[39m
[31m+ To call a tool, use this EXACT format:[39m
[31m+ ```tool_code[39m
[31m+ send_email(to="recipient@example.com", subject="Subject", body="Body text")[39m
[31m+ ```[39m
[31m+[39m
[31m+ EXAMPLE:[39m
[31m+ User: Send an email to john@example.com with subject "Hello"[39m
[31m+ Assistant: [drafts and gets confirmation][39m
[31m+ User: yes[39m
[31m+ Assistant: [39m
[31m+ ```tool_code[39m
[31m+ send_email(to="john@example.com", subject="Hello", body="The body text")[39m
[31m+ ```[39m
[31m+[39m
[31m+ Use these tools when they can help answer the user's question.[39m

 â¯ src/__tests__/services/mcpService.test.ts:99:20
     97|     expect(prompt).toBeTruthy()
     98|     expect(prompt).toContain('send_email')
     99|     expect(prompt).toContain('tool_call')
       |                    ^
    100|     expect(prompt).toContain('Example (send an email)')
    101|   })

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[18/37]âŽ¯

 FAIL  src/__tests__/utils/utils.test.ts > cn utility function > should handle Tailwind class conflicts
AssertionError: expected 'text-blue-500' to be 'text-red-500 text-blue-500' // Object.is equality

Expected: [32m"[7mtext-red-500 [27mtext-blue-500"[39m
Received: [31m"text-blue-500"[39m

 â¯ src/__tests__/utils/utils.test.ts:66:20
     64|     const result = cn('text-red-500', 'text-blue-500')
     65|     // The last class should win in Tailwind's utility-first approach
     66|     expect(result).toBe('text-red-500 text-blue-500')
       |                    ^
     67|   })
     68| 

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[19/37]âŽ¯

 FAIL  tests/integration/mcpDayTool.integration.test.ts > MCP Day Tool Integration > should correctly answer what day tomorrow is
AssertionError: expected 'Today is Thursday' to be null

[32m- Expected:[39m 
null

[31m+ Received:[39m 
"Today is Thursday"

 â¯ tests/integration/mcpDayTool.integration.test.ts:92:22
     90|     // "Tomorrow" should NOT be routed to MCP - it should return null
     91|     // and let the LLM handle the reasoning
     92|     expect(response).toBeNull();
       |                      ^
     93|   });
     94| });

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[20/37]âŽ¯

 FAIL  src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows loading state initially
TestingLibraryElementError: Unable to find an element with the text: Loading conversations.... This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex flex-col h-full bg-background border-r border-border"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4 pb-2 border-b border-border"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between mb-3"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-lg font-semibold mr-4"[39m
          [36m>[39m
            [0mConversations[0m
          [36m</h2>[39m
          [36m<button[39m
            [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-primary text-primary-foreground hover:bg-primary/90 rounded-md h-8 px-3 whitespace-nowrap"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-plus w-4 h-4 mr-1"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"M5 12h14"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M12 5v14"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mNew Chat[0m
          [36m</button>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"relative mb-3"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"m21 21-4.34-4.34"[39m
            [36m/>[39m
            [36m<circle[39m
              [33mcx[39m=[32m"11"[39m
              [33mcy[39m=[32m"11"[39m
              [33mr[39m=[32m"8"[39m
            [36m/>[39m
          [36m</svg>[39m
          [36m<input[39m
            [33mclass[39m=[32m"flex w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm pl-10 pr-4 h-9"[39m
            [33mplaceholder[39m=[32m"Search conversations..."[39m
            [33mvalue[39m=[32m""[39m
          [36m/>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center gap-2 mb-3"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-funnel w-4 h-4 text-muted-foreground"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
            [36m/>[39m
          [36m</svg>[39m
          [36m<span[39m
            [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
          [36m>[39m
            [0mFilters:[0m
          [36m</span>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between"[39m
        [36m>[39m
          [36m<button[39m
            [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground rounded-md h-7 px-2 text-xs"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-archive w-3 h-3 mr-1"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<rect[39m
                [33mheight[39m=[32m"5"[39m
                [33mrx[39m=[32m"1"[39m
                [33mwidth[39m=[32m"20"[39m
                [33mx[39m=[32m"2"[39m
                [33my[39m=[32m"3"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M10 12h4"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mShow[0m
            [0m Archived[0m
          [36m</button>[39m
          [36m<span[39m
            [33mclass[39m=[32m"text-xs text-muted-foreground"[39m
          [36m>[39m
            [0m0[0m
            [0m conversation[0m
            [0ms[0m
          [36m</span>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"relative overflow-hidden flex-1"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mstyle[39m=[32m"position: relative; --radix-scroll-area-corner-width: 0px; --radix-scroll-area-corner-height: 0px;"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-full w-full rounded-[inherit]"[39m
          [33mdata-radix-scroll-area-viewport[39m=[32m""[39m
          [33mstyle[39m=[32m"overflow-x: hidden; overflow-y: scroll;"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"min-width: 100%; display: table;"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"p-4 text-center text-muted-foreground"[39m
            [36m>[39m
              [36m<p>[39m
                [0mNo conversations yet. Start chatting to create one![0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 â¯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 â¯ getByText node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 â¯ src/components/__tests__/ConversationSidebar.test.tsx:94:19
     92|     render(<ConversationSidebar {...defaultProps} />);
     93|     
     94|     expect(screen.getByText('Loading conversations...')).toBeInTheDocuâ€¦
       |                   ^
     95|   });
     96| 

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[21/37]âŽ¯

 FAIL  src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > shows empty state when no conversations exist
TestingLibraryElementError: Unable to find an element with the text: No conversations yet. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex flex-col h-full bg-background border-r border-border"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-4 pb-2 border-b border-border"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between mb-3"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-lg font-semibold mr-4"[39m
          [36m>[39m
            [0mConversations[0m
          [36m</h2>[39m
          [36m<button[39m
            [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-primary text-primary-foreground hover:bg-primary/90 rounded-md h-8 px-3 whitespace-nowrap"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-plus w-4 h-4 mr-1"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"M5 12h14"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M12 5v14"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mNew Chat[0m
          [36m</button>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"relative mb-3"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"m21 21-4.34-4.34"[39m
            [36m/>[39m
            [36m<circle[39m
              [33mcx[39m=[32m"11"[39m
              [33mcy[39m=[32m"11"[39m
              [33mr[39m=[32m"8"[39m
            [36m/>[39m
          [36m</svg>[39m
          [36m<input[39m
            [33mclass[39m=[32m"flex w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm pl-10 pr-4 h-9"[39m
            [33mplaceholder[39m=[32m"Search conversations..."[39m
            [33mvalue[39m=[32m""[39m
          [36m/>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center gap-2 mb-3"[39m
        [36m>[39m
          [36m<svg[39m
            [33maria-hidden[39m=[32m"true"[39m
            [33mclass[39m=[32m"lucide lucide-funnel w-4 h-4 text-muted-foreground"[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"24"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"24"[39m
            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
          [36m>[39m
            [36m<path[39m
              [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
            [36m/>[39m
          [36m</svg>[39m
          [36m<span[39m
            [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
          [36m>[39m
            [0mFilters:[0m
          [36m</span>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex items-center justify-between"[39m
        [36m>[39m
          [36m<button[39m
            [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground rounded-md h-7 px-2 text-xs"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-archive w-3 h-3 mr-1"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<rect[39m
                [33mheight[39m=[32m"5"[39m
                [33mrx[39m=[32m"1"[39m
                [33mwidth[39m=[32m"20"[39m
                [33mx[39m=[32m"2"[39m
                [33my[39m=[32m"3"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8"[39m
              [36m/>[39m
              [36m<path[39m
                [33md[39m=[32m"M10 12h4"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mShow[0m
            [0m Archived[0m
          [36m</button>[39m
          [36m<span[39m
            [33mclass[39m=[32m"text-xs text-muted-foreground"[39m
          [36m>[39m
            [0m0[0m
            [0m conversation[0m
            [0ms[0m
          [36m</span>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"relative overflow-hidden flex-1"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mstyle[39m=[32m"position: relative; --radix-scroll-area-corner-width: 0px; --radix-scroll-area-corner-height: 0px;"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-full w-full rounded-[inherit]"[39m
          [33mdata-radix-scroll-area-viewport[39m=[32m""[39m
          [33mstyle[39m=[32m"overflow-x: hidden; overflow-y: scroll;"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"min-width: 100%; display: table;"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"p-4 text-center text-muted-foreground"[39m
            [36m>[39m
              [36m<p>[39m
                [0mNo conversations yet. Start chatting to create one![0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex flex-col h-full bg-background border-r border-border"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-4 pb-2 border-b border-border"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-3"[39m
          [36m>[39m
            [36m<h2[39m
              [33mclass[39m=[32m"text-lg font-semibold mr-4"[39m
            [36m>[39m
              [0mConversations[0m
            [36m</h2>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-primary text-primary-foreground hover:bg-primary/90 rounded-md h-8 px-3 whitespace-nowrap"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-plus w-4 h-4 mr-1"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<path[39m
                  [33md[39m=[32m"M5 12h14"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M12 5v14"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mNew Chat[0m
            [36m</button>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative mb-3"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-search absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m21 21-4.34-4.34"[39m
              [36m/>[39m
              [36m<circle[39m
                [33mcx[39m=[32m"11"[39m
                [33mcy[39m=[32m"11"[39m
                [33mr[39m=[32m"8"[39m
              [36m/>[39m
            [36m</svg>[39m
            [36m<input[39m
              [33mclass[39m=[32m"flex w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm pl-10 pr-4 h-9"[39m
              [33mplaceholder[39m=[32m"Search conversations..."[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-2 mb-3"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-funnel w-4 h-4 text-muted-foreground"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"[39m
              [36m/>[39m
            [36m</svg>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
            [36m>[39m
              [0mFilters:[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground rounded-md h-7 px-2 text-xs"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-archive w-3 h-3 mr-1"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin[39m=[32m"round"[39m
                [33mstroke-width[39m=[32m"2"[39m
                [33mviewBox[39m=[32m"0 0 24 24"[39m
                [33mwidth[39m=[32m"24"[39m
                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
              [36m>[39m
                [36m<rect[39m
                  [33mheight[39m=[32m"5"[39m
                  [33mrx[39m=[32m"1"[39m
                  [33mwidth[39m=[32m"20"[39m
                  [33mx[39m=[32m"2"[39m
                  [33my[39m=[32m"3"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8"[39m
                [36m/>[39m
                [36m<path[39m
                  [33md[39m=[32m"M10 12h4"[39m
                [36m/>[39m
              [36m</svg>[39m
              [0mShow[0m
              [0m Archived[0m
            [36m</button>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-muted-foreground"[39m
            [36m>[39m
              [0m0[0m
              [0m conversation[0m
              [0ms[0m
            [36m</span>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"relative overflow-hidden flex-1"[39m
          [33mdir[39m=[32m"ltr"[39m
          [33mstyle[39m=[32m"position: relative; --radix-scroll-area-corner-width: 0px; --radix-scroll-area-corner-height: 0px;"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"h-full w-full rounded-[inherit]"[39m
            [33mdata-radix-scroll-area-viewport[39m=[32m""[39m
            [33mstyle[39m=[32m"overflow-x: hidden; overflow-y: scroll;"[39m
          [36m>[39m
            [36m<div[39m
              [33mstyle[39m=[32m"min-width: 100%; display: table;"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"p-4 text-center text-muted-foreground"[39m
              [36m>[39m
                [36m<p>[39m
                  [0mNo conversations yet. Start chatting to create one![0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitFor node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ src/components/__tests__/ConversationSidebar.test.tsx:100:11
     98|     render(<ConversationSidebar {...defaultProps} />);
     99|     
    100|     await waitFor(() => {
       |           ^
    101|       expect(screen.getByText('No conversations yet')).toBeInTheDocumeâ€¦
    102|       expect(screen.getByText('Start a new chat to get started')).toBeâ€¦

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22/37]âŽ¯

 FAIL  src/components/__tests__/ConversationSidebar.test.tsx > ConversationSidebar > renders with correct width and styling
Error: [2mexpect([22m[31melement[39m[2m).toHaveClass([22m[32m[32m"flex flex-col h-full bg-background border-r border-border"[32m[39m[2m)[22m

Expected the element to have class:
[32m  flex flex-col h-full bg-background border-r border-border[39m
Received:
[31m  flex items-center justify-between mb-3[39m
 â¯ src/components/__tests__/ConversationSidebar.test.tsx:136:21
    134|     
    135|     const sidebar = screen.getByText('Conversations').closest('div');
    136|     expect(sidebar).toHaveClass('flex', 'flex-col', 'h-full', 'bg-backâ€¦
       |                     ^
    137|   });
    138| 

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[23/37]âŽ¯

 FAIL  src/services/__tests__/stateManagement.test.ts > SettingsService > loadSettings > should load default settings when none exist
AssertionError: expected '' to be 'ollama' // Object.is equality

[32m- Expected[39m
[31m+ Received[39m

[32m- ollama[39m

 â¯ src/services/__tests__/stateManagement.test.ts:60:41
     58|       const settings = await settingsService.loadSettings();
     59|       
     60|       expect(settings.selectedProvider).toBe('ollama');
       |                                         ^
     61|       expect(settings.selectedModel).toBe('llama3.2');
     62|       expect(settings.theme).toBe('system');

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[24/37]âŽ¯

 FAIL  src/services/__tests__/stateManagement.test.ts > SettingsService > loadSettings > should handle invalid JSON gracefully
AssertionError: expected '' to be 'ollama' // Object.is equality

[32m- Expected[39m
[31m+ Received[39m

[32m- ollama[39m

 â¯ src/services/__tests__/stateManagement.test.ts:86:41
     84|       const settings = await settingsService.loadSettings();
     85|       
     86|       expect(settings.selectedProvider).toBe('ollama'); // Default
       |                                         ^
     87|       expect(settings.selectedModel).toBe('llama3.2'); // Default
     88|     });

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[25/37]âŽ¯

 FAIL  src/services/__tests__/stateManagement.test.ts > ConversationStateManager > initialization > should initialize successfully
AssertionError: expected "vi.fn()" to be called at least once
 â¯ src/services/__tests__/stateManagement.test.ts:199:45
    197|       await stateManager.initialize();
    198|       
    199|       expect(mockStorageService.initialize).toHaveBeenCalled();
       |                                             ^
    200|       expect(mockStorageService.listConversations).toHaveBeenCalled();
    201|     });

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[26/37]âŽ¯

 FAIL  src/services/__tests__/stateManagement.test.ts > ConversationStateManager > initialization > should handle initialization errors gracefully
AssertionError: expected 'IndexedDB API missing. Please visit hâ€¦' to be 'Storage failed' // Object.is equality

Expected: [32m"Storage failed"[39m
Received: [31m"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"[39m

 â¯ src/services/__tests__/stateManagement.test.ts:209:27
    207|       
    208|       const state = stateManager.getState();
    209|       expect(state.error).toBe('Storage failed');
       |                           ^
    210|     });
    211|   });

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[27/37]âŽ¯

 FAIL  src/services/__tests__/stateManagement.test.ts > ConversationStateManager > state management > should notify listeners of state changes
AssertionError: expected true to be false // Object.is equality

[32m- Expected[39m
[31m+ Received[39m

[32m- false[39m
[31m+ true[39m

 â¯ src/services/__tests__/stateManagement.test.ts:221:51
    219|       
    220|       expect(listener).toHaveBeenCalled();
    221|       expect(listener.mock.calls[0][0].isLoading).toBe(false);
       |                                                   ^
    222|       
    223|       unsubscribe();

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[28/37]âŽ¯

 FAIL  src/services/__tests__/stateManagement.test.ts > ConversationStateManager > state management > should provide readonly state access
AssertionError: expected [Function] to throw an error
 â¯ src/services/__tests__/stateManagement.test.ts:232:10
    230|       expect(() => {
    231|         (state as any).conversations = [];
    232|       }).toThrow();
       |          ^
    233|     });
    234|   });

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[29/37]âŽ¯

 FAIL  src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should create new conversations
AssertionError: expected "vi.fn()" to be called at least once
 â¯ src/services/__tests__/stateManagement.test.ts:246:51
    244|       expect(conversation.provider).toBe('ollama');
    245|       expect(conversation.currentModel).toBe('llama3.2');
    246|       expect(mockStorageService.saveConversation).toHaveBeenCalled();
       |                                                   ^
    247|     });
    248| 

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[30/37]âŽ¯

 FAIL  src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should load conversations by ID
DatabaseClosedError: MissingAPIError IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb
âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯
Serialized Error: { inner: { name: 'MissingAPIError', message: 'IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb', inner: null, constructor: 'Function<DexieError>', toString: 'Function<toString>' } }
âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[31/37]âŽ¯

 FAIL  src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should archive and unarchive conversations
Error: Conversation not found
 â¯ ConversationStateManager.toggleArchive src/services/conversationStateManager.ts:358:32
    356|     try {
    357|       const conversation = this.state.conversations.find(c => c.id ===â€¦
    358|       if (!conversation) throw new Error('Conversation not found');
       |                                ^
    359|       
    360|       const updatedConversation = { 
 â¯ src/services/__tests__/stateManagement.test.ts:271:26

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[32/37]âŽ¯

 FAIL  src/services/__tests__/stateManagement.test.ts > ConversationStateManager > conversation operations > should delete conversations
DatabaseClosedError: MissingAPIError IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb
âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯
Serialized Error: { inner: { name: 'MissingAPIError', message: 'IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb', inner: null, constructor: 'Function<DexieError>', toString: 'Function<toString>' } }
âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[33/37]âŽ¯

 FAIL  src/services/__tests__/stateManagement.test.ts > ConversationStateManager > search and filtering > should search conversations
AssertionError: expected "vi.fn()" to be called with arguments: [ 'test' ][90m

Number of calls: [1m0[22m
[39m
 â¯ src/services/__tests__/stateManagement.test.ts:305:54
    303|       await stateManager.searchConversations(filters);
    304|       
    305|       expect(mockStorageService.searchConversations).toHaveBeenCalledWâ€¦
       |                                                      ^
    306|     });
    307| 

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[34/37]âŽ¯

 FAIL  src/services/__tests__/stateManagement.test.ts > ConversationUtils > title generation > should truncate long messages
Error: Invalid Chai property: toEndWith
 â¯ src/services/__tests__/stateManagement.test.ts:365:14
    363|       const title = ConversationUtils.generateTitle([longMessage]);
    364|       expect(title.length).toBeLessThanOrEqual(53);
    365|       expect(title).toEndWith('...');
       |              ^
    366|     });
    367|   });

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[35/37]âŽ¯

 FAIL  src/services/__tests__/storage.test.ts > StorageService > conversation operations > should truncate long titles appropriately
Error: Invalid Chai property: toEndWith
 â¯ src/services/__tests__/storage.test.ts:85:14
     83|       const title = ConversationUtils.generateTitle([longMessage]);
     84|       expect(title.length).toBeLessThanOrEqual(53); // 50 chars + '...'
     85|       expect(title).toEndWith('...');
       |              ^
     86|     });
     87| 

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[36/37]âŽ¯

 FAIL  src/services/__tests__/storage.test.ts > StorageService > sanitization > should remove API keys from messages
AssertionError: expected 'My API key is: sk-1234567890abcdef' to be 'My API key is: [REDACTED]' // Object.is equality

Expected: [32m"My API key is: [7m[REDACTED][27m"[39m
Received: [31m"My API key is: [7msk-1234567890abcdef[27m"[39m

 â¯ src/services/__tests__/storage.test.ts:170:45
    168|       const sanitized = ConversationUtils.sanitizeConversation(updatedâ€¦
    169|       
    170|       expect(sanitized.messages[0].content).toBe('My API key is: [REDAâ€¦
       |                                             ^
    171|     });
    172|   });

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[37/37]âŽ¯


 Test Files  13 failed | 1 passed (14)
      Tests  35 failed | 81 passed (116)
   Start at  17:22:06
   Duration  2.82s (transform 736ms, setup 731ms, collect 1.60s, tests 2.74s, environment 4.12s, prepare 69ms)

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
Cancelling test run. Press CTRL+c again to exit forcefully.

error: script "test" exited with code 130
